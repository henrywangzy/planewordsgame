<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>多点触控测试</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: #1a1a2e;
            color: white;
        }
        
        .test-info {
            background: #16213e;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .test-button {
            background: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 5px;
            font-size: 16px;
        }
        
        .test-button:hover {
            background: #45a049;
        }
        
        .status {
            background: #333;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: monospace;
        }
        
        .instruction {
            background: #0066cc;
            color: white;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        
        iframe {
            width: 100%;
            height: 70vh;
            border: 2px solid #444;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <div class="test-info">
        <h1>🎮 飞机射击单词游戏 - 多点触控测试</h1>
        <p>这个测试页面帮助验证游戏的多点触控功能是否正常工作。</p>
    </div>
    
    <div class="instruction">
        <h3>📱 测试指南：</h3>
        <ol>
            <li><strong>进入游戏</strong>：点击下方游戏中的"开始游戏"按钮</li>
            <li><strong>单独测试</strong>：先单独测试摇杆移动，再单独测试射击按钮</li>
            <li><strong>多点触控测试</strong>：同时用两根手指，一根控制摇杆移动，另一根按射击按钮</li>
            <li><strong>期望结果</strong>：飞机应该能在移动的同时连续射击，两个操作不冲突</li>
        </ol>
    </div>
    
    <button class="test-button" onclick="startTest()">🚀 开始测试</button>
    <button class="test-button" onclick="refreshGame()">🔄 重新加载游戏</button>
    <button class="test-button" onclick="openInNewTab()">🔗 在新标签页打开</button>
    
    <div class="status" id="status">
        <strong>状态：</strong>等待开始测试...
    </div>
    
    <iframe id="gameFrame" src="index.html" title="飞机射击单词游戏"></iframe>
    
    <div class="test-info">
        <h3>🔧 故障排除：</h3>
        <ul>
            <li><strong>触摸不响应</strong>：尝试刷新页面或在新标签页中打开</li>
            <li><strong>移动和射击冲突</strong>：确保同时触摸摇杆区域和射击按钮</li>
            <li><strong>性能问题</strong>：关闭其他应用和浏览器标签页</li>
        </ul>
    </div>

    <script>
        function updateStatus(message) {
            document.getElementById('status').innerHTML = `<strong>状态：</strong>${message}`;
        }
        
        function startTest() {
            updateStatus('测试开始！请在游戏中点击"开始游戏"按钮，然后测试多点触控功能。');
            
            // 监听iframe内的消息（如果游戏发送的话）
            window.addEventListener('message', function(event) {
                if (event.data && event.data.type === 'game-status') {
                    updateStatus(`游戏状态: ${event.data.message}`);
                }
            });
            
            setTimeout(() => {
                updateStatus('请尝试同时触摸摇杆和射击按钮，验证飞机能否在移动时射击。');
            }, 5000);
        }
        
        function refreshGame() {
            const iframe = document.getElementById('gameFrame');
            iframe.src = iframe.src;
            updateStatus('游戏已重新加载，请重新开始测试。');
        }
        
        function openInNewTab() {
            window.open('index.html', '_blank');
            updateStatus('游戏已在新标签页中打开。');
        }
        
        // 检测触摸支持
        window.addEventListener('load', function() {
            const hasTouch = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
            const touchStatus = hasTouch ? '✅ 支持触摸' : '❌ 不支持触摸';
            updateStatus(`设备检测：${touchStatus} | 请点击"开始测试"按钮开始。`);
        });
    </script>
</body>
</html>