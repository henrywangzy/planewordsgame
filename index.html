<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é£æœºå°„å‡»å•è¯ - ç§»åŠ¨ç«¯H5æ¸¸æˆ</title>
    <style>
        /* åŸºç¡€æ ·å¼é‡ç½® */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* ä¸»è‰²è°ƒ - æ·±ç©ºè“è‰²ç³» */
            --primary-blue: #1a237e;
            --light-blue: #3f51b5;
            --dark-blue: #000051;
            
            /* å¼ºè°ƒè‰² */
            --laser-green: #4CAF50;
            --warning-orange: #FF9800;
            --error-red: #F44336;
            --accent-yellow: #FFC107;
            
            /* æ–‡å­—è‰²å½© */
            --text-primary: #333333;
            --text-secondary: #666666;
            --text-light: #ffffff;
            
            /* é—´è·ç³»ç»Ÿ */
            --spacing-xs: 4px;
            --spacing-sm: 8px;
            --spacing-md: 12px;
            --spacing-lg: 16px;
            --spacing-xl: 20px;
            --spacing-2xl: 24px;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, var(--primary-blue), var(--dark-blue));
            min-height: 100vh;
            overflow: hidden;
            user-select: none;
            -webkit-user-select: none;
            -webkit-touch-callout: none;
        }

        /* æ‰‹æœºç«¯å®¹å™¨ */
        .phone-container {
            width: 100vw;
            height: 100vh;
            max-width: 390px;
            max-height: 844px;
            margin: 0 auto;
            position: relative;
            overflow: hidden;
            background: linear-gradient(180deg, #0a0e27 0%, #1a237e 50%, #000051 100%);
        }

        /* å¹³æ¿å’Œæ¡Œé¢é€‚é… */
        @media (min-width: 768px) {
            body {
                background: #f0f2f5;
                display: flex;
                justify-content: center;
                align-items: center;
            }
            .phone-container {
                border: 8px solid #333;
                border-radius: 30px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            }
        }

        /* å±å¹•åˆ‡æ¢ç³»ç»Ÿ */
        .screen {
            width: 100%;
            height: 100%;
            display: none;
            flex-direction: column;
            position: absolute;
            top: 0;
            left: 0;
            justify-content: center;
            align-items: center;
        }

        .screen.active {
            display: flex;
        }

        .screen.transition-enter {
            transform: translateX(100%);
            animation: slideIn 0.3s ease-out forwards;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }

        /* å¼€å§‹ç•Œé¢æ ·å¼ */
        #startScreen {
            background: linear-gradient(135deg, 
                rgba(26, 35, 126, 0.9), 
                rgba(0, 0, 81, 0.9)
            );
            color: var(--text-light);
            text-align: center;
            padding: var(--spacing-2xl);
        }

        .game-title {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: var(--spacing-xl);
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            animation: titleGlow 2s ease-in-out infinite alternate;
        }

        @keyframes titleGlow {
            from { text-shadow: 2px 2px 4px rgba(76, 175, 80, 0.3); }
            to { text-shadow: 2px 2px 8px rgba(76, 175, 80, 0.6); }
        }

        .game-subtitle {
            font-size: 1.1rem;
            margin-bottom: var(--spacing-2xl);
            opacity: 0.9;
        }

        /* æŒ‰é’®æ ·å¼ */
        .button {
            background: linear-gradient(135deg, var(--laser-green), #45a049);
            color: white;
            border: none;
            border-radius: 25px;
            padding: var(--spacing-lg) var(--spacing-2xl);
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            margin: var(--spacing-sm) 0;
            min-width: 200px;
            min-height: 44px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
            position: relative;
            overflow: hidden;
        }

        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(76, 175, 80, 0.4);
        }

        .button:active {
            transform: translateY(0);
        }

        .button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        /* æ¬¡è¦æŒ‰é’®æ ·å¼ */
        .button-secondary {
            background: linear-gradient(135deg, var(--light-blue), var(--primary-blue));
            box-shadow: 0 4px 12px rgba(63, 81, 181, 0.3);
        }

        .button-secondary:hover {
            box-shadow: 0 6px 16px rgba(63, 81, 181, 0.4);
        }

        /* å¹´çº§é€‰æ‹©å™¨ */
        .grade-selector {
            margin: var(--spacing-xl) 0;
        }

        .grade-selector label {
            display: block;
            margin-bottom: var(--spacing-sm);
            font-weight: 600;
        }

        .grade-select {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            padding: var(--spacing-md) var(--spacing-lg);
            font-size: 1rem;
            min-width: 120px;
            cursor: pointer;
        }

        .grade-select option {
            background: var(--primary-blue);
            color: white;
        }

        /* æ¸¸æˆç•Œé¢æ ·å¼ */
        #gameScreen {
            background: radial-gradient(circle at center, #0a0e27 0%, #000051 100%);
            position: relative;
            padding: 0;
        }

        /* æ˜Ÿç©ºèƒŒæ™¯ */
        .stars {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        /* æ¸¸æˆç”»å¸ƒ */
        .game-canvas {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 2;
            background: transparent;
        }

        /* æ¸¸æˆUIå±‚ */
        .game-ui {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 3;
            pointer-events: none;
        }
        
        .game-ui button {
            pointer-events: auto;
        }

        /* é¡¶éƒ¨ä¿¡æ¯æ  */
        .game-header {
            position: absolute;
            top: var(--spacing-lg);
            left: var(--spacing-lg);
            right: var(--spacing-lg);
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            color: var(--text-light);
            font-weight: 600;
            z-index: 4;
        }

        .header-left {
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .target-info {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-xs);
        }

        .target-word {
            font-size: 1.2rem;
            animation: targetPulse 2s ease-in-out infinite;
        }

        .target-chinese {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        @keyframes targetPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .header-right {
            text-align: right;
            display: flex;
            flex-direction: column;
            gap: var(--spacing-xs);
        }

        /* ç§»åŠ¨ç«¯è™šæ‹Ÿæ§åˆ¶å™¨ */
        .mobile-controls {
            position: absolute;
            bottom: 40px;
            left: 0;
            right: 0;
            height: 180px;
            z-index: 5;
            pointer-events: none;
        }
        
        .mobile-controls button,
        .mobile-controls .joystick-area {
            pointer-events: auto;
        }

        /* å·¦ä¾§æ‘‡æ† */
        .joystick-area {
            position: absolute;
            bottom: calc(var(--spacing-xl) + 40px);
            left: var(--spacing-xl);
            width: 100px;
            height: 100px;
            pointer-events: auto;
        }

        .joystick-base {
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .joystick-knob {
            width: 40%;
            height: 40%;
            background: rgba(76, 175, 80, 0.8);
            border: 2px solid var(--laser-green);
            border-radius: 50%;
            position: absolute;
            transition: all 0.1s ease;
            box-shadow: 0 2px 8px rgba(76, 175, 80, 0.4);
        }

        /* å³ä¾§å°„å‡»æŒ‰é’® */
        .shoot-button {
            width: 70px;
            height: 70px;
            background: rgba(255, 99, 71, 0.8);
            border: 3px solid rgba(255, 99, 71, 1);
            border-radius: 50%;
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
            cursor: pointer;
            pointer-events: auto;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            box-shadow: 0 4px 12px rgba(255, 99, 71, 0.4);
        }

        .shoot-button:active {
            transform: scale(0.95);
            background: rgba(255, 99, 71, 1);
        }
        
        .right-controls {
            position: absolute;
            right: calc(var(--spacing-xl) + 40px);
            bottom: calc(var(--spacing-xl) + 40px);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }
        
        .mobile-pause-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.6);
            border: 2px solid rgba(255, 255, 255, 0.8);
            font-size: 24px;
            cursor: pointer;
            user-select: none;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            color: white;
            pointer-events: auto;
        }
        
        .mobile-pause-button:active {
            background: rgba(255, 255, 255, 0.6);
            transform: scale(0.95);
        }

        /* æš‚åœå’Œè®¾ç½®æŒ‰é’® */
        .pause-button, .settings-button {
            position: absolute;
            top: var(--spacing-lg);
            width: 44px;
            height: 44px;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            color: var(--text-light);
            font-size: 1.2rem;
            cursor: pointer;
            pointer-events: auto;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 4;
        }

        .pause-button {
            right: var(--spacing-lg);
        }

        .settings-button {
            right: 70px;
        }

        /* è¡€æ§½ç³»ç»Ÿ */
        .health-bar {
            position: absolute;
            right: var(--spacing-sm);
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 200px;
            z-index: 4;
            display: flex;
            flex-direction: column;
            gap: 2px;
        }
        
        .health-segment {
            flex: 1;
            background: rgba(76, 175, 80, 0.8);
            border: 1px solid rgba(76, 175, 80, 1);
            border-radius: 2px;
            transition: all 0.3s ease;
        }
        
        .health-segment.damaged {
            background: rgba(244, 67, 54, 0.3);
            border-color: rgba(244, 67, 54, 0.5);
        }

        /* è¿”å›æŒ‰é’® */
        .back-button {
            position: relative;
            top: 0;
            left: 0;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.4);
            border-radius: 50%;
            color: var(--text-light);
            font-size: 1.2rem;
            cursor: pointer;
            pointer-events: auto;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 4;
            flex-shrink: 0;
        }

        .back-button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        .back-button:active {
            background: rgba(255, 255, 255, 0.4);
            transform: scale(0.95);
        }

        .pause-button:hover, .settings-button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        /* ç»“æŸç•Œé¢æ ·å¼ */
        #gameOverScreen {
            background: linear-gradient(135deg, 
                rgba(244, 67, 54, 0.9), 
                rgba(139, 195, 74, 0.9)
            );
            color: var(--text-light);
            text-align: center;
            padding: var(--spacing-2xl);
        }

        .game-over-title {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: var(--spacing-xl);
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .score-display {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: var(--spacing-xl);
            margin: var(--spacing-xl) 0;
            backdrop-filter: blur(10px);
        }

        .score-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: var(--spacing-sm) 0;
            padding: var(--spacing-xs) 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .score-label {
            font-weight: 600;
        }

        .score-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--accent-yellow);
        }

        /* åŠ è½½åŠ¨ç”» */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top: 2px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 350px) {
            .game-title {
                font-size: 2rem;
            }
            .button {
                min-width: 160px;
                padding: var(--spacing-md) var(--spacing-lg);
            }
        }

        @media (max-height: 600px) {
            .mobile-controls {
                height: 140px;
            }
            .joystick-area {
                width: 80px;
                height: 80px;
            }
            .shoot-button {
                width: 65px;
                height: 65px;
                font-size: 1.2rem;
            }
        }

        /* è§¦æ§ä¼˜åŒ– */
        .touch-target {
            touch-action: manipulation;
        }

        .no-select {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
    </style>
</head>
<body>
    <div class="phone-container">
        <!-- å¼€å§‹ç•Œé¢ -->
        <div id="startScreen" class="screen active">
            <h1 class="game-title">ğŸš€ é£æœºå°„å‡»å•è¯</h1>
            <p class="game-subtitle">è¾¹å°„å‡»è¾¹å­¦è‹±è¯­ï¼Œå¯“æ•™äºä¹çš„H5æ¸¸æˆ</p>
            
            <div class="grade-selector">
                <label for="gradeSelect">é€‰æ‹©å¹´çº§:</label>
                <select id="gradeSelect" class="grade-select">
                    <option value="1">ä¸€å¹´çº§ (åŸºç¡€è¯æ±‡)</option>
                    <option value="2">äºŒå¹´çº§ (æ—¥å¸¸ç”¨è¯)</option>
                    <option value="3" selected>ä¸‰å¹´çº§ (å¸¸ç”¨è¯æ±‡)</option>
                    <option value="4">å››å¹´çº§ (è¿›é˜¶è¯æ±‡)</option>
                    <option value="5">äº”å¹´çº§ (é«˜çº§è¯æ±‡)</option>
                    <option value="6">å…­å¹´çº§ (å¤æ‚è¯æ±‡)</option>
                </select>
            </div>

            <div class="grade-selector">
                <label for="difficultySelect">æ¸¸æˆéš¾åº¦:</label>
                <select id="difficultySelect" class="grade-select">
                    <option value="easy">ä½ (æ…¢é€Ÿç§»åŠ¨)</option>
                    <option value="medium" selected>ä¸­ (ä¸­é€Ÿç§»åŠ¨)</option>
                    <option value="hard">é«˜ (å¿«é€Ÿç§»åŠ¨)</option>
                </select>
            </div>

            <button id="startGameBtn" class="button">
                <span class="loading" id="startLoading" style="display: none;"></span>
                å¼€å§‹æ¸¸æˆ ğŸ®
            </button>
            
            <button id="instructionsBtn" class="button button-secondary">
                æ¸¸æˆè¯´æ˜ ğŸ“–
            </button>
            
            <button id="vocabularyBtn" class="button button-secondary">
                å•è¯æœ¬ ğŸ“–
            </button>
        </div>

        <!-- æ¸¸æˆç•Œé¢ -->
        <div id="gameScreen" class="screen">
            <!-- æ˜Ÿç©ºèƒŒæ™¯ -->
            <canvas class="stars" id="starsCanvas"></canvas>
            
            <!-- ä¸»æ¸¸æˆç”»å¸ƒ -->
            <canvas class="game-canvas" id="gameCanvas"></canvas>
            
            <!-- æ¸¸æˆUIå±‚ -->
            <div class="game-ui">
                <!-- é¡¶éƒ¨ä¿¡æ¯æ  -->
                <div class="game-header">
                    <div class="header-left">
                        <!-- è¿”å›æŒ‰é’® -->
                        <button id="backBtn" class="back-button">â†</button>
                        <div class="target-info">
                            <div class="target-word" id="targetWord">ç›®æ ‡: Loading...</div>
                            <div class="target-chinese" id="targetChinese">åŠ è½½ä¸­...</div>
                        </div>
                    </div>
                    <div class="header-right">
                        <div>åˆ†æ•°: <span id="scoreDisplay">0</span></div>
                        <div>ç”Ÿå‘½: <span id="livesDisplay">3</span> â¤ï¸</div>
                        <div>æ­¦å™¨: <span id="weaponDisplay">åŸºç¡€</span></div>
                    </div>
                </div>
                
                <!-- è¡€æ§½æ˜¾ç¤º -->
                <div class="health-bar" id="healthBar"></div>
            </div>

            <!-- ç§»åŠ¨ç«¯è™šæ‹Ÿæ§åˆ¶å™¨ -->
            <div class="mobile-controls">
                <!-- å·¦ä¾§æ‘‡æ† -->
                <div class="joystick-area" id="joystickArea">
                    <div class="joystick-base">
                        <div class="joystick-knob" id="joystickKnob"></div>
                    </div>
                </div>

                <!-- å³ä¾§æŒ‰é’®ç»„ -->
                <div class="right-controls">
                    <button class="mobile-pause-button touch-target" id="mobilePauseBtn">â¸ï¸</button>
                    <button class="shoot-button touch-target" id="shootBtn">ğŸ”¥</button>
                </div>
            </div>
        </div>

        <!-- æ¸¸æˆç»“æŸç•Œé¢ -->
        <div id="gameOverScreen" class="screen">
            <h2 class="game-over-title">ğŸ¯ æ¸¸æˆç»“æŸ</h2>
            
            <div class="score-display">
                <div class="score-item">
                    <span class="score-label">æœ€ç»ˆå¾—åˆ†</span>
                    <span class="score-value" id="finalScore">0</span>
                </div>
                <div class="score-item">
                    <span class="score-label">å‡»ä¸­æ•Œæœº</span>
                    <span class="score-value" id="enemiesHit">0</span>
                </div>
                <div class="score-item">
                    <span class="score-label">æ­£ç¡®å•è¯</span>
                    <span class="score-value" id="correctWords">0</span>
                </div>
                <div class="score-item">
                    <span class="score-label">å­¦ä¹ å•è¯æ•°</span>
                    <span class="score-value" id="wordsLearned">0</span>
                </div>
                <div class="score-item">
                    <span class="score-label">æœ€é«˜è¿å‡»</span>
                    <span class="score-value" id="maxCombo">0</span>
                </div>
            </div>

            <button id="playAgainBtn" class="button">
                å†ç©ä¸€æ¬¡ ğŸ”„
            </button>
            
            <button id="viewWordsBtn" class="button button-secondary">
                å·²å­¦ä¹ å•è¯ ğŸ“–
            </button>
            
            <button id="backToMenuBtn" class="button button-secondary">
                è¿”å›ä¸»èœå• ğŸ 
            </button>
        </div>
    </div>

    <script>
        // ============================================
        // å…¨å±€å˜é‡å®šä¹‰
        // ============================================
        
        // æ¸¸æˆçŠ¶æ€
        let gameRunning = false;
        let gamePaused = false;
        let currentScreen = 'start';
        let selectedGrade = 3;
        let selectedDifficulty = 'medium';
        
        // æ¸¸æˆå¯¹è±¡
        let player = null;
        let enemies = [];
        let bullets = [];
        let particles = [];
        let targetWord = null;
        let currentWordData = null;
        let wordReadingInProgress = false;  // æ˜¯å¦æ­£åœ¨æœ—è¯»å•è¯
        let autoSwitchTimeout = null;       // è‡ªåŠ¨åˆ‡æ¢è®¡æ—¶å™¨
        let learnedWords = []; // å·²å­¦ä¹ çš„å•è¯åˆ—è¡¨
        
        // æ¸¸æˆç»Ÿè®¡
        let score = 0;
        let health = 10; // è¡€æ§½ï¼Œåˆå§‹10æ ¼
        let maxHealth = 10;
        let enemiesHitCount = 0;
        let correctWordsCount = 0;
        let wordsLearnedCount = 0;
        let combo = 0;
        let maxCombo = 0;
        let weaponLevel = 1;
        
        // Canvas ç›¸å…³
        let canvas, ctx, starsCanvas, starsCtx;
        let canvasWidth = 390;
        let canvasHeight = 844;
        
        // è¾“å…¥æ§åˆ¶
        let keys = {};
        let joystickActive = false;
        let joystickCenter = { x: 50, y: 50 };
        let joystickPosition = { x: 0, y: 0 };
        
        // æ¸¸æˆå¾ªç¯
        let gameLoopId = null;
        let lastTime = 0;
        let deltaTime = 0;

        // éŸ³æ•ˆæ§åˆ¶
        let audioEnabled = true;
        let speechEnabled = true;

        // ============================================
        // å•è¯æ•°æ®åº“ (å®Œå…¨å¤ç”¨ snackwordsgame çš„æ•°æ®)
        // ============================================
        
        const words = {
            1: [
                // åŸºç¡€åè¯ - åŠ¨ç‰©ç±»
                { word: 'Cat', chinese: 'çŒ«', pronunciation: '/kÃ¦t/', example: 'The cat is cute. è¿™åªçŒ«å¾ˆå¯çˆ±ã€‚' },
                { word: 'Dog', chinese: 'ç‹—', pronunciation: '/dÉ”ËÉ¡/', example: 'My dog is friendly. æˆ‘çš„ç‹—å¾ˆå‹å¥½ã€‚' },
                { word: 'Bird', chinese: 'é¸Ÿ', pronunciation: '/bÉœËrd/', example: 'Birds can fly. é¸Ÿä¼šé£ã€‚' },
                { word: 'Fish', chinese: 'é±¼', pronunciation: '/fÉªÊƒ/', example: 'Fish can swim. é±¼ä¼šæ¸¸æ³³ã€‚' },
                { word: 'Duck', chinese: 'é¸­å­', pronunciation: '/dÊŒk/', example: 'The duck swims in the pond. é¸­å­åœ¨æ± å¡˜é‡Œæ¸¸æ³³ã€‚' },
                { word: 'Bear', chinese: 'ç†Š', pronunciation: '/ber/', example: 'The bear is big. è¿™åªç†Šå¾ˆå¤§ã€‚' },
                { word: 'Pig', chinese: 'çŒª', pronunciation: '/pÉªÉ¡/', example: 'The pig is pink. è¿™åªçŒªæ˜¯ç²‰è‰²çš„ã€‚' },
                { word: 'Cow', chinese: 'ç‰›', pronunciation: '/kaÊŠ/', example: 'The cow gives milk. å¥¶ç‰›äº§å¥¶ã€‚' },
                { word: 'Horse', chinese: 'é©¬', pronunciation: '/hÉ”Ërs/', example: 'The horse runs fast. é©¬è·‘å¾—å¾ˆå¿«ã€‚' },
                { word: 'Sheep', chinese: 'ç»µç¾Š', pronunciation: '/ÊƒiËp/', example: 'The sheep has wool. ç»µç¾Šæœ‰ç¾Šæ¯›ã€‚' },
                
                // åŸºç¡€åè¯ - é£Ÿç‰©ç±»
                { word: 'Apple', chinese: 'è‹¹æœ', pronunciation: '/ËˆÃ¦p.É™l/', example: 'I like to eat apples. æˆ‘å–œæ¬¢åƒè‹¹æœã€‚' },
                { word: 'Banana', chinese: 'é¦™è•‰', pronunciation: '/bÉ™ËˆnÃ¦n.É™/', example: 'The banana is yellow. é¦™è•‰æ˜¯é»„è‰²çš„ã€‚' },
                { word: 'Orange', chinese: 'æ©™å­', pronunciation: '/ËˆÉ”Ër.ÉªndÊ’/', example: 'The orange is sweet. æ©™å­å¾ˆç”œã€‚' },
                { word: 'Bread', chinese: 'é¢åŒ…', pronunciation: '/bred/', example: 'I eat bread for breakfast. æˆ‘æ—©é¤åƒé¢åŒ…ã€‚' },
                { word: 'Cake', chinese: 'è›‹ç³•', pronunciation: '/keÉªk/', example: 'The cake is delicious. è›‹ç³•å¾ˆç¾å‘³ã€‚' },
                { word: 'Milk', chinese: 'ç‰›å¥¶', pronunciation: '/mÉªlk/', example: 'I drink milk every day. æˆ‘æ¯å¤©å–ç‰›å¥¶ã€‚' },
                { word: 'Egg', chinese: 'é¸¡è›‹', pronunciation: '/eÉ¡/', example: 'I cook an egg. æˆ‘ç…®ä¸€ä¸ªé¸¡è›‹ã€‚' },
                { word: 'Rice', chinese: 'ç±³é¥­', pronunciation: '/raÉªs/', example: 'Rice is my favorite food. ç±³é¥­æ˜¯æˆ‘æœ€å–œæ¬¢çš„é£Ÿç‰©ã€‚' },
                { word: 'Water', chinese: 'æ°´', pronunciation: '/ËˆwÉ”Ë.tÉ™r/', example: 'Water is important. æ°´å¾ˆé‡è¦ã€‚' },
                { word: 'Tea', chinese: 'èŒ¶', pronunciation: '/tiË/', example: 'I drink tea in the afternoon. æˆ‘ä¸‹åˆå–èŒ¶ã€‚' },
                
                // åŸºç¡€åè¯ - èº«ä½“éƒ¨ä½
                { word: 'Head', chinese: 'å¤´', pronunciation: '/hed/', example: 'I wear a hat on my head. æˆ‘å¤´ä¸Šæˆ´å¸½å­ã€‚' },
                { word: 'Face', chinese: 'è„¸', pronunciation: '/feÉªs/', example: 'She has a pretty face. å¥¹æœ‰ä¸€å¼ æ¼‚äº®çš„è„¸ã€‚' },
                { word: 'Eye', chinese: 'çœ¼ç›', pronunciation: '/aÉª/', example: 'I have two eyes. æˆ‘æœ‰ä¸¤åªçœ¼ç›ã€‚' },
                { word: 'Nose', chinese: 'é¼»å­', pronunciation: '/noÊŠz/', example: 'My nose can smell. æˆ‘çš„é¼»å­èƒ½é—»åˆ°æ°”å‘³ã€‚' },
                { word: 'Mouth', chinese: 'å˜´å·´', pronunciation: '/maÊŠÎ¸/', example: 'I eat with my mouth. æˆ‘ç”¨å˜´å·´åƒä¸œè¥¿ã€‚' },
                { word: 'Ear', chinese: 'è€³æœµ', pronunciation: '/Éªr/', example: 'I hear with my ears. æˆ‘ç”¨è€³æœµå¬å£°éŸ³ã€‚' },
                { word: 'Hand', chinese: 'æ‰‹', pronunciation: '/hÃ¦nd/', example: 'I write with my hand. æˆ‘ç”¨æ‰‹å†™å­—ã€‚' },
                { word: 'Foot', chinese: 'è„š', pronunciation: '/fÊŠt/', example: 'I walk with my feet. æˆ‘ç”¨è„šèµ°è·¯ã€‚' },
                
                // åŸºç¡€é¢œè‰²
                { word: 'Red', chinese: 'çº¢è‰²', pronunciation: '/red/', example: 'The apple is red. è‹¹æœæ˜¯çº¢è‰²çš„ã€‚' },
                { word: 'Blue', chinese: 'è“è‰²', pronunciation: '/bluË/', example: 'The sky is blue. å¤©ç©ºæ˜¯è“è‰²çš„ã€‚' },
                { word: 'Green', chinese: 'ç»¿è‰²', pronunciation: '/É¡riËn/', example: 'Grass is green. è‰æ˜¯ç»¿è‰²çš„ã€‚' },
                { word: 'Yellow', chinese: 'é»„è‰²', pronunciation: '/Ëˆjel.oÊŠ/', example: 'The sun is yellow. å¤ªé˜³æ˜¯é»„è‰²çš„ã€‚' },
                { word: 'White', chinese: 'ç™½è‰²', pronunciation: '/waÉªt/', example: 'Snow is white. é›ªæ˜¯ç™½è‰²çš„ã€‚' },
                { word: 'Black', chinese: 'é»‘è‰²', pronunciation: '/blÃ¦k/', example: 'Night is black. å¤œæ™šæ˜¯é»‘è‰²çš„ã€‚' },
            ],
            2: [
                // å®¶åº­æˆå‘˜
                { word: 'Mother', chinese: 'å¦ˆå¦ˆ', pronunciation: '/ËˆmÊŒÃ°.É™r/', example: 'My mother cooks dinner. æˆ‘å¦ˆå¦ˆåšæ™šé¥­ã€‚' },
                { word: 'Father', chinese: 'çˆ¸çˆ¸', pronunciation: '/ËˆfÉ‘Ë.Ã°É™r/', example: 'My father works hard. æˆ‘çˆ¸çˆ¸å·¥ä½œå¾ˆåŠªåŠ›ã€‚' },
                { word: 'Sister', chinese: 'å§å¦¹', pronunciation: '/ËˆsÉªs.tÉ™r/', example: 'My sister is kind. æˆ‘å§å§å¾ˆå–„è‰¯ã€‚' },
                { word: 'Brother', chinese: 'å…„å¼Ÿ', pronunciation: '/ËˆbrÊŒÃ°.É™r/', example: 'My brother plays soccer. æˆ‘å“¥å“¥è¸¢è¶³çƒã€‚' },
                { word: 'Baby', chinese: 'å©´å„¿', pronunciation: '/ËˆbeÉª.bi/', example: 'The baby is sleeping. å©´å„¿åœ¨ç¡è§‰ã€‚' },
                { word: 'Friend', chinese: 'æœ‹å‹', pronunciation: '/frend/', example: 'She is my best friend. å¥¹æ˜¯æˆ‘æœ€å¥½çš„æœ‹å‹ã€‚' },
                { word: 'Teacher', chinese: 'è€å¸ˆ', pronunciation: '/ËˆtiË.tÊƒÉ™r/', example: 'Our teacher is nice. æˆ‘ä»¬çš„è€å¸ˆå¾ˆå¥½ã€‚' },
                { word: 'Student', chinese: 'å­¦ç”Ÿ', pronunciation: '/ËˆstuË.dÉ™nt/', example: 'I am a student. æˆ‘æ˜¯ä¸€åå­¦ç”Ÿã€‚' },
                
                // å­¦æ ¡ç”¨å“
                { word: 'School', chinese: 'å­¦æ ¡', pronunciation: '/skuËl/', example: 'I go to school every day. æˆ‘æ¯å¤©ä¸Šå­¦ã€‚' },
                { word: 'Classroom', chinese: 'æ•™å®¤', pronunciation: '/ËˆklÃ¦s.ruËm/', example: 'We study in the classroom. æˆ‘ä»¬åœ¨æ•™å®¤é‡Œå­¦ä¹ ã€‚' },
                { word: 'Desk', chinese: 'è¯¾æ¡Œ', pronunciation: '/desk/', example: 'Books are on my desk. ä¹¦åœ¨æˆ‘çš„è¯¾æ¡Œä¸Šã€‚' },
                { word: 'Pencil', chinese: 'é“…ç¬”', pronunciation: '/Ëˆpen.sÉ™l/', example: 'I write with a pencil. æˆ‘ç”¨é“…ç¬”å†™å­—ã€‚' },
                { word: 'Paper', chinese: 'çº¸', pronunciation: '/ËˆpeÉª.pÉ™r/', example: 'I draw on paper. æˆ‘åœ¨çº¸ä¸Šç”»ç”»ã€‚' },
                { word: 'Ruler', chinese: 'å°ºå­', pronunciation: '/ËˆruË.lÉ™r/', example: 'I measure with a ruler. æˆ‘ç”¨å°ºå­æµ‹é‡ã€‚' },
                { word: 'Eraser', chinese: 'æ©¡çš®', pronunciation: '/ÉªËˆreÉª.sÉ™r/', example: 'I use an eraser to correct mistakes. æˆ‘ç”¨æ©¡çš®æ”¹é”™è¯¯ã€‚' },
                
                // æ—¥å¸¸ç”¨å“
                { word: 'Home', chinese: 'å®¶', pronunciation: '/hoÊŠm/', example: 'I love my home. æˆ‘çˆ±æˆ‘çš„å®¶ã€‚' },
                { word: 'Room', chinese: 'æˆ¿é—´', pronunciation: '/ruËm/', example: 'My room is clean. æˆ‘çš„æˆ¿é—´å¾ˆå¹²å‡€ã€‚' },
                { word: 'Kitchen', chinese: 'å¨æˆ¿', pronunciation: '/ËˆkÉªtÊƒ.É™n/', example: 'Mom cooks in the kitchen. å¦ˆå¦ˆåœ¨å¨æˆ¿åšé¥­ã€‚' },
                { word: 'Bathroom', chinese: 'æµ´å®¤', pronunciation: '/ËˆbÃ¦Î¸.ruËm/', example: 'I brush my teeth in the bathroom. æˆ‘åœ¨æµ´å®¤åˆ·ç‰™ã€‚' },
                
                // è¡£ç‰©
                { word: 'Clothes', chinese: 'è¡£æœ', pronunciation: '/kloÊŠÃ°z/', example: 'I wear clean clothes. æˆ‘ç©¿å¹²å‡€çš„è¡£æœã€‚' },
                { word: 'Dress', chinese: 'è¿è¡£è£™', pronunciation: '/dres/', example: 'She wears a beautiful dress. å¥¹ç©¿ç€ä¸€æ¡æ¼‚äº®çš„è¿è¡£è£™ã€‚' },
                { word: 'Coat', chinese: 'å¤–å¥—', pronunciation: '/koÊŠt/', example: 'I wear a coat when it\'s cold. å¤©å†·æ—¶æˆ‘ç©¿å¤–å¥—ã€‚' },
                { word: 'Sock', chinese: 'è¢œå­', pronunciation: '/sÉ‘Ëk/', example: 'My socks are warm. æˆ‘çš„è¢œå­å¾ˆæš–å’Œã€‚' },
            ],
            3: [
                // åŠ¨ä½œåŠ¨è¯
                { word: 'Run', chinese: 'è·‘', pronunciation: '/rÊŒn/', example: 'I can run fast. æˆ‘èƒ½è·‘å¾—å¾ˆå¿«ã€‚' },
                { word: 'Walk', chinese: 'èµ°', pronunciation: '/wÉ”Ëk/', example: 'I walk to school. æˆ‘èµ°è·¯ä¸Šå­¦ã€‚' },
                { word: 'Jump', chinese: 'è·³', pronunciation: '/dÊ’ÊŒmp/', example: 'I can jump high. æˆ‘èƒ½è·³å¾—å¾ˆé«˜ã€‚' },
                { word: 'Swim', chinese: 'æ¸¸æ³³', pronunciation: '/swÉªm/', example: 'I love to swim. æˆ‘å–œæ¬¢æ¸¸æ³³ã€‚' },
                { word: 'Fly', chinese: 'é£', pronunciation: '/flaÉª/', example: 'Birds can fly. é¸Ÿä¼šé£ã€‚' },
                { word: 'Climb', chinese: 'çˆ¬', pronunciation: '/klaÉªm/', example: 'I climb the tree. æˆ‘çˆ¬æ ‘ã€‚' },
                { word: 'Sleep', chinese: 'ç¡è§‰', pronunciation: '/sliËp/', example: 'I sleep at night. æˆ‘æ™šä¸Šç¡è§‰ã€‚' },
                { word: 'Wake', chinese: 'é†’æ¥', pronunciation: '/weÉªk/', example: 'I wake up early. æˆ‘èµ·å¾—å¾ˆæ—©ã€‚' },
                { word: 'Laugh', chinese: 'ç¬‘', pronunciation: '/lÃ¦f/', example: 'The joke makes me laugh. è¿™ä¸ªç¬‘è¯è®©æˆ‘ç¬‘ã€‚' },
                { word: 'Cry', chinese: 'å“­', pronunciation: '/kraÉª/', example: 'Don\'t cry, be happy. åˆ«å“­ï¼Œå¼€å¿ƒç‚¹ã€‚' },
                
                // æ—¶é—´æ¦‚å¿µ
                { word: 'Morning', chinese: 'æ—©æ™¨', pronunciation: '/ËˆmÉ”Ër.nÉªÅ‹/', example: 'Good morning! æ—©ä¸Šå¥½ï¼' },
                { word: 'Afternoon', chinese: 'ä¸‹åˆ', pronunciation: '/ËŒÃ¦f.tÉ™rËˆnuËn/', example: 'I study in the afternoon. æˆ‘ä¸‹åˆå­¦ä¹ ã€‚' },
                { word: 'Evening', chinese: 'æ™šä¸Š', pronunciation: '/ËˆiËv.nÉªÅ‹/', example: 'We have dinner in the evening. æˆ‘ä»¬æ™šä¸Šåƒæ™šé¥­ã€‚' },
                { word: 'Night', chinese: 'å¤œæ™š', pronunciation: '/naÉªt/', example: 'Good night! æ™šå®‰ï¼' },
                { word: 'Today', chinese: 'ä»Šå¤©', pronunciation: '/tÉ™ËˆdeÉª/', example: 'Today is sunny. ä»Šå¤©é˜³å…‰æ˜åªšã€‚' },
                { word: 'Tomorrow', chinese: 'æ˜å¤©', pronunciation: '/tÉ™ËˆmÉ”Ër.oÊŠ/', example: 'Tomorrow is Monday. æ˜å¤©æ˜¯æ˜ŸæœŸä¸€ã€‚' },
                { word: 'Yesterday', chinese: 'æ˜¨å¤©', pronunciation: '/Ëˆjes.tÉ™r.deÉª/', example: 'Yesterday was fun. æ˜¨å¤©å¾ˆæœ‰è¶£ã€‚' },
                
                // å¤©æ°”
                { word: 'Weather', chinese: 'å¤©æ°”', pronunciation: '/ËˆweÃ°.É™r/', example: 'The weather is nice. å¤©æ°”å¾ˆå¥½ã€‚' },
                { word: 'Sunny', chinese: 'æ™´æœ—çš„', pronunciation: '/ËˆsÊŒn.i/', example: 'It\'s a sunny day. ä»Šå¤©æ˜¯ä¸ªæ™´å¤©ã€‚' },
                { word: 'Rainy', chinese: 'ä¸‹é›¨çš„', pronunciation: '/ËˆreÉª.ni/', example: 'It\'s a rainy day. ä»Šå¤©ä¸‹é›¨ã€‚' },
                { word: 'Cloudy', chinese: 'å¤šäº‘çš„', pronunciation: '/ËˆklaÊŠ.di/', example: 'The sky is cloudy. å¤©ç©ºå¤šäº‘ã€‚' },
                { word: 'Windy', chinese: 'æœ‰é£çš„', pronunciation: '/ËˆwÉªn.di/', example: 'It\'s windy outside. å¤–é¢æœ‰é£ã€‚' },
                { word: 'Snow', chinese: 'é›ª', pronunciation: '/snoÊŠ/', example: 'Snow is white and cold. é›ªæ˜¯ç™½è‰²çš„ï¼Œå¾ˆå†·ã€‚' },
                
                // æ•°å­—
                { word: 'One', chinese: 'ä¸€', pronunciation: '/wÊŒn/', example: 'I have one book. æˆ‘æœ‰ä¸€æœ¬ä¹¦ã€‚' },
                { word: 'Two', chinese: 'äºŒ', pronunciation: '/tuË/', example: 'Two cats are playing. ä¸¤åªçŒ«åœ¨ç©è€ã€‚' },
                { word: 'Three', chinese: 'ä¸‰', pronunciation: '/Î¸riË/', example: 'I see three birds. æˆ‘çœ‹åˆ°ä¸‰åªé¸Ÿã€‚' },
                { word: 'Four', chinese: 'å››', pronunciation: '/fÉ”Ër/', example: 'Four seasons in a year. ä¸€å¹´æœ‰å››ä¸ªå­£èŠ‚ã€‚' },
                { word: 'Five', chinese: 'äº”', pronunciation: '/faÉªv/', example: 'I have five fingers. æˆ‘æœ‰äº”æ ¹æ‰‹æŒ‡ã€‚' },
            ],
            4: [
                // æ›´å¤æ‚çš„æ¦‚å¿µ
                { word: 'Beautiful', chinese: 'ç¾ä¸½çš„', pronunciation: '/ËˆbjuË.tÌ¬É™.fÉ™l/', example: 'The flower is beautiful. è¿™æœµèŠ±å¾ˆç¾ä¸½ã€‚' },
                { word: 'Important', chinese: 'é‡è¦çš„', pronunciation: '/ÉªmËˆpÉ”Ër.tÉ™nt/', example: 'Study is important. å­¦ä¹ å¾ˆé‡è¦ã€‚' },
                { word: 'Different', chinese: 'ä¸åŒçš„', pronunciation: '/ËˆdÉªf.É™r.É™nt/', example: 'We are all different. æˆ‘ä»¬éƒ½ä¸ä¸€æ ·ã€‚' },
                { word: 'Interesting', chinese: 'æœ‰è¶£çš„', pronunciation: '/ËˆÉªn.trÉ™.stÉªÅ‹/', example: 'This book is interesting. è¿™æœ¬ä¹¦å¾ˆæœ‰è¶£ã€‚' },
                { word: 'Difficult', chinese: 'å›°éš¾çš„', pronunciation: '/ËˆdÉªf.É™.kÉ™lt/', example: 'Math can be difficult. æ•°å­¦å¯èƒ½å¾ˆéš¾ã€‚' },
                { word: 'Popular', chinese: 'å—æ¬¢è¿çš„', pronunciation: '/ËˆpÉ‘Ëp.jÉ™.lÉ™r/', example: 'This song is popular. è¿™é¦–æ­Œå¾ˆå—æ¬¢è¿ã€‚' },
                
                // å­¦ç§‘è¯æ±‡
                { word: 'Science', chinese: 'ç§‘å­¦', pronunciation: '/ËˆsaÉª.É™ns/', example: 'I love science class. æˆ‘å–œæ¬¢ç§‘å­¦è¯¾ã€‚' },
                { word: 'History', chinese: 'å†å²', pronunciation: '/ËˆhÉªs.tÉ™r.i/', example: 'History tells us about the past. å†å²å‘Šè¯‰æˆ‘ä»¬è¿‡å»çš„äº‹æƒ…ã€‚' },
                { word: 'Geography', chinese: 'åœ°ç†', pronunciation: '/dÊ’iËˆÉ‘Ë.É¡rÉ™.fi/', example: 'Geography is about places. åœ°ç†æ˜¯å…³äºåœ°æ–¹çš„ã€‚' },
                { word: 'Language', chinese: 'è¯­è¨€', pronunciation: '/ËˆlÃ¦Å‹.É¡wÉªdÊ’/', example: 'English is a language. è‹±è¯­æ˜¯ä¸€ç§è¯­è¨€ã€‚' },
                { word: 'Mathematics', chinese: 'æ•°å­¦', pronunciation: '/ËŒmÃ¦Î¸.É™ËˆmÃ¦t.Éªks/', example: 'Mathematics helps us solve problems. æ•°å­¦å¸®åŠ©æˆ‘ä»¬è§£å†³é—®é¢˜ã€‚' },
                
                // è‡ªç„¶ç¯å¢ƒ
                { word: 'Mountain', chinese: 'å±±', pronunciation: '/ËˆmaÊŠn.tÌ¬É™n/', example: 'The mountain is very high. è¿™åº§å±±å¾ˆé«˜ã€‚' },
                { word: 'River', chinese: 'æ²³æµ', pronunciation: '/ËˆrÉªv.É™r/', example: 'Fish live in the river. é±¼ç”Ÿæ´»åœ¨æ²³é‡Œã€‚' },
                { word: 'Ocean', chinese: 'æµ·æ´‹', pronunciation: '/ËˆoÊŠ.ÊƒÉ™n/', example: 'The ocean is vast and blue. æµ·æ´‹å¹¿é˜”è€Œè”šè“ã€‚' },
                { word: 'Forest', chinese: 'æ£®æ—', pronunciation: '/ËˆfÉ”Ër.Éªst/', example: 'Many animals live in the forest. è®¸å¤šåŠ¨ç‰©ç”Ÿæ´»åœ¨æ£®æ—é‡Œã€‚' },
                { word: 'Desert', chinese: 'æ²™æ¼ ', pronunciation: '/Ëˆdez.Éšt/', example: 'The desert is hot and dry. æ²™æ¼ ç‚çƒ­å¹²ç‡¥ã€‚' },
                
                // æƒ…æ„Ÿè¡¨è¾¾
                { word: 'Happy', chinese: 'å¿«ä¹çš„', pronunciation: '/ËˆhÃ¦p.i/', example: 'I am happy today. æˆ‘ä»Šå¤©å¾ˆå¿«ä¹ã€‚' },
                { word: 'Sad', chinese: 'æ‚²ä¼¤çš„', pronunciation: '/sÃ¦d/', example: 'Don\'t be sad. åˆ«ä¼¤å¿ƒã€‚' },
                { word: 'Excited', chinese: 'å…´å¥‹çš„', pronunciation: '/ÉªkËˆsaÉª.tÌ¬Éªd/', example: 'I am excited about the trip. æˆ‘å¯¹è¿™æ¬¡æ—…è¡Œæ„Ÿåˆ°å…´å¥‹ã€‚' },
                { word: 'Surprised', chinese: 'æƒŠè®¶çš„', pronunciation: '/sÉšËˆpraÉªzd/', example: 'I was surprised by the gift. æˆ‘å¯¹è¿™ä¸ªç¤¼ç‰©æ„Ÿåˆ°æƒŠè®¶ã€‚' },
                { word: 'Worried', chinese: 'æ‹…å¿ƒçš„', pronunciation: '/ËˆwÉË.id/', example: 'Mom is worried about me. å¦ˆå¦ˆä¸ºæˆ‘æ‹…å¿ƒã€‚' },
            ],
            5: [
                // é«˜çº§è¯æ±‡
                { word: 'Adventure', chinese: 'å†’é™©', pronunciation: '/É™dËˆven.tÊƒÉš/', example: 'Reading is an adventure. é˜…è¯»æ˜¯ä¸€åœºå†’é™©ã€‚' },
                { word: 'Discovery', chinese: 'å‘ç°', pronunciation: '/dÉªËˆskÊŒv.Éš.i/', example: 'Science leads to new discoveries. ç§‘å­¦å¸¦æ¥æ–°å‘ç°ã€‚' },
                { word: 'Invention', chinese: 'å‘æ˜', pronunciation: '/ÉªnËˆven.ÊƒÉ™n/', example: 'The computer is a great invention. ç”µè„‘æ˜¯ä¼Ÿå¤§çš„å‘æ˜ã€‚' },
                { word: 'Environment', chinese: 'ç¯å¢ƒ', pronunciation: '/ÉªnËˆvaÉª.rÉ™n.mÉ™nt/', example: 'We must protect our environment. æˆ‘ä»¬å¿…é¡»ä¿æŠ¤ç¯å¢ƒã€‚' },
                { word: 'Technology', chinese: 'æŠ€æœ¯', pronunciation: '/tekËˆnÉ‘Ë.lÉ™.dÊ’i/', example: 'Technology changes our lives. æŠ€æœ¯æ”¹å˜æˆ‘ä»¬çš„ç”Ÿæ´»ã€‚' },
                
                // æŠ½è±¡æ¦‚å¿µ
                { word: 'Imagination', chinese: 'æƒ³è±¡åŠ›', pronunciation: '/ÉªËŒmÃ¦dÊ’.É™ËˆneÉª.ÊƒÉ™n/', example: 'Children have great imagination. å­©å­ä»¬æœ‰å¾ˆå¼ºçš„æƒ³è±¡åŠ›ã€‚' },
                { word: 'Creativity', chinese: 'åˆ›é€ åŠ›', pronunciation: '/ËŒkri.eÉªËˆtÉªv.É™.tÌ¬i/', example: 'Art develops creativity. è‰ºæœ¯åŸ¹å…»åˆ›é€ åŠ›ã€‚' },
                { word: 'Responsibility', chinese: 'è´£ä»»', pronunciation: '/rÉªËŒspÉ‘Ën.sÉ™ËˆbÉªl.É™.tÌ¬i/', example: 'We have a responsibility to help others. æˆ‘ä»¬æœ‰å¸®åŠ©ä»–äººçš„è´£ä»»ã€‚' },
                { word: 'Opportunity', chinese: 'æœºä¼š', pronunciation: '/ËŒÉ‘Ëp.ÉšËˆtuË.nÉ™.tÌ¬i/', example: 'Education gives us opportunities. æ•™è‚²ç»™æˆ‘ä»¬æœºä¼šã€‚' },
                { word: 'Achievement', chinese: 'æˆå°±', pronunciation: '/É™ËˆtÊƒiËv.mÉ™nt/', example: 'Winning the game was a great achievement. èµ¢å¾—æ¯”èµ›æ˜¯ä¸€ä¸ªå·¨å¤§çš„æˆå°±ã€‚' },
                
                // ç§‘å­¦æŠ€æœ¯
                { word: 'Experiment', chinese: 'å®éªŒ', pronunciation: '/ÉªkËˆsper.É™.mÉ™nt/', example: 'We did a science experiment. æˆ‘ä»¬åšäº†ä¸€ä¸ªç§‘å­¦å®éªŒã€‚' },
                { word: 'Research', chinese: 'ç ”ç©¶', pronunciation: '/ËˆriË.sÉËtÊƒ/', example: 'Research helps us learn new things. ç ”ç©¶å¸®åŠ©æˆ‘ä»¬å­¦ä¹ æ–°äº‹ç‰©ã€‚' },
                { word: 'Information', chinese: 'ä¿¡æ¯', pronunciation: '/ËŒÉªn.fÉšËˆmeÉª.ÊƒÉ™n/', example: 'Books contain useful information. ä¹¦ç±åŒ…å«æœ‰ç”¨çš„ä¿¡æ¯ã€‚' },
                { word: 'Communication', chinese: 'äº¤æµ', pronunciation: '/kÉ™ËŒmjuË.nÉ™ËˆkeÉª.ÊƒÉ™n/', example: 'Good communication is important. è‰¯å¥½çš„äº¤æµå¾ˆé‡è¦ã€‚' },
                
                // æ–‡åŒ–è‰ºæœ¯
                { word: 'Culture', chinese: 'æ–‡åŒ–', pronunciation: '/ËˆkÊŒl.tÊƒÉš/', example: 'Every country has its own culture. æ¯ä¸ªå›½å®¶éƒ½æœ‰è‡ªå·±çš„æ–‡åŒ–ã€‚' },
                { word: 'Traditional', chinese: 'ä¼ ç»Ÿçš„', pronunciation: '/trÉ™ËˆdÉªÊƒ.É™n.É™l/', example: 'We celebrate traditional festivals. æˆ‘ä»¬åº†ç¥ä¼ ç»ŸèŠ‚æ—¥ã€‚' },
                { word: 'Modern', chinese: 'ç°ä»£çš„', pronunciation: '/ËˆmÉ‘Ë.dÉšn/', example: 'We live in a modern world. æˆ‘ä»¬ç”Ÿæ´»åœ¨ç°ä»£ä¸–ç•Œã€‚' },
                { word: 'Ancient', chinese: 'å¤ä»£çš„', pronunciation: '/ËˆeÉªn.ÊƒÉ™nt/', example: 'Ancient civilizations were amazing. å¤ä»£æ–‡æ˜ä»¤äººæƒŠå¹ã€‚' },
            ],
            6: [
                // å¤æ‚å­¦æœ¯è¯æ±‡
                { word: 'Philosophy', chinese: 'å“²å­¦', pronunciation: '/fÉ™ËˆlÉ‘Ë.sÉ™.fi/', example: 'Philosophy helps us think about life. å“²å­¦å¸®åŠ©æˆ‘ä»¬æ€è€ƒç”Ÿæ´»ã€‚' },
                { word: 'Psychology', chinese: 'å¿ƒç†å­¦', pronunciation: '/saÉªËˆkÉ‘Ë.lÉ™.dÊ’i/', example: 'Psychology studies how the mind works. å¿ƒç†å­¦ç ”ç©¶å¤§è„‘å¦‚ä½•å·¥ä½œã€‚' },
                { word: 'Democracy', chinese: 'æ°‘ä¸»', pronunciation: '/dÉªËˆmÉ‘Ë.krÉ™.si/', example: 'Democracy gives people a voice. æ°‘ä¸»è®©äººæ°‘æœ‰å‘è¨€æƒã€‚' },
                { word: 'Independence', chinese: 'ç‹¬ç«‹', pronunciation: '/ËŒÉªn.dÉªËˆpen.dÉ™ns/', example: 'The country gained independence. è¿™ä¸ªå›½å®¶è·å¾—äº†ç‹¬ç«‹ã€‚' },
                { word: 'Revolution', chinese: 'é©å‘½', pronunciation: '/ËŒrev.É™ËˆluË.ÊƒÉ™n/', example: 'The industrial revolution changed everything. å·¥ä¸šé©å‘½æ”¹å˜äº†ä¸€åˆ‡ã€‚' },
                
                // å…¨çƒåŒ–æ¦‚å¿µ
                { word: 'Globalization', chinese: 'å…¨çƒåŒ–', pronunciation: '/ËŒÉ¡loÊŠ.bÉ™l.É™ËˆzeÉª.ÊƒÉ™n/', example: 'Globalization connects the world. å…¨çƒåŒ–è¿æ¥ä¸–ç•Œã€‚' },
                { word: 'International', chinese: 'å›½é™…çš„', pronunciation: '/ËŒÉªn.tÉšËˆnÃ¦Êƒ.É™n.É™l/', example: 'International cooperation is important. å›½é™…åˆä½œå¾ˆé‡è¦ã€‚' },
                { word: 'Organization', chinese: 'ç»„ç»‡', pronunciation: '/ËŒÉ”Ër.É¡É™n.É™ËˆzeÉª.ÊƒÉ™n/', example: 'The UN is a global organization. è”åˆå›½æ˜¯ä¸€ä¸ªå…¨çƒç»„ç»‡ã€‚' },
                { word: 'Community', chinese: 'ç¤¾åŒº', pronunciation: '/kÉ™ËˆmjuË.nÉ™.tÌ¬i/', example: 'We are part of a global community. æˆ‘ä»¬æ˜¯å…¨çƒç¤¾åŒºçš„ä¸€éƒ¨åˆ†ã€‚' },
                
                // ç¯å¢ƒä¸å¯æŒç»­å‘å±•
                { word: 'Sustainability', chinese: 'å¯æŒç»­æ€§', pronunciation: '/sÉ™ËŒsteÉª.nÉ™ËˆbÉªl.É™.tÌ¬i/', example: 'Sustainability protects our future. å¯æŒç»­æ€§ä¿æŠ¤æˆ‘ä»¬çš„æœªæ¥ã€‚' },
                { word: 'Conservation', chinese: 'ä¿æŠ¤', pronunciation: '/ËŒkÉ‘Ën.sÉšËˆveÉª.ÊƒÉ™n/', example: 'Wildlife conservation is crucial. é‡ç”ŸåŠ¨ç‰©ä¿æŠ¤è‡³å…³é‡è¦ã€‚' },
                { word: 'Renewable', chinese: 'å¯å†ç”Ÿçš„', pronunciation: '/rÉªËˆnuË.É™.bÉ™l/', example: 'Solar energy is renewable. å¤ªé˜³èƒ½æ˜¯å¯å†ç”Ÿçš„ã€‚' },
                { word: 'Biodiversity', chinese: 'ç”Ÿç‰©å¤šæ ·æ€§', pronunciation: '/ËŒbaÉª.oÊŠ.daÉªËˆvÉË.sÉ™.tÌ¬i/', example: 'Biodiversity is essential for ecosystems. ç”Ÿç‰©å¤šæ ·æ€§å¯¹ç”Ÿæ€ç³»ç»Ÿè‡³å…³é‡è¦ã€‚' },
                
                // æ‰¹åˆ¤æ€§æ€ç»´
                { word: 'Analysis', chinese: 'åˆ†æ', pronunciation: '/É™ËˆnÃ¦l.É™.sÉªs/', example: 'Critical analysis helps us understand. æ‰¹åˆ¤æ€§åˆ†æå¸®åŠ©æˆ‘ä»¬ç†è§£ã€‚' },
                { word: 'Evidence', chinese: 'è¯æ®', pronunciation: '/Ëˆev.É™.dÉ™ns/', example: 'Scientists need evidence for their theories. ç§‘å­¦å®¶éœ€è¦è¯æ®æ¥æ”¯æŒä»–ä»¬çš„ç†è®ºã€‚' },
                { word: 'Hypothesis', chinese: 'å‡è®¾', pronunciation: '/haÉªËˆpÉ‘Ë.Î¸É™.sÉªs/', example: 'A hypothesis is an educated guess. å‡è®¾æ˜¯æœ‰æ ¹æ®çš„çŒœæµ‹ã€‚' },
                { word: 'Conclusion', chinese: 'ç»“è®º', pronunciation: '/kÉ™nËˆkluË.Ê’É™n/', example: 'The research led to an important conclusion. ç ”ç©¶å¾—å‡ºäº†é‡è¦ç»“è®ºã€‚' },
            ]
        };

        // ============================================
        // åˆå§‹åŒ–å‡½æ•°
        // ============================================
        
        function init() {
            console.log('ğŸš€ åˆå§‹åŒ–é£æœºå°„å‡»å•è¯æ¸¸æˆ...');
            
            // è·å–Canvaså…ƒç´ 
            canvas = document.getElementById('gameCanvas');
            ctx = canvas.getContext('2d');
            starsCanvas = document.getElementById('starsCanvas');
            starsCtx = starsCanvas.getContext('2d');
            
            // è®¾ç½®Canvaså°ºå¯¸
            resizeCanvas();
            
            // ç»‘å®šäº‹ä»¶ç›‘å¬å™¨
            bindEventListeners();
            
            // åˆå§‹åŒ–æ˜Ÿç©ºèƒŒæ™¯
            initStars();
            
            // åˆå§‹åŒ–éŸ³é¢‘ç³»ç»Ÿ
            initAudio();
            
            // è®¾ç½®é»˜è®¤æ˜¾ç¤ºå¼€å§‹å±å¹•
            switchScreen('startScreen');
            currentScreen = 'start';
            
            // å»¶è¿Ÿæ’­æ”¾èƒŒæ™¯éŸ³ä¹ï¼ˆç­‰å¾…ç”¨æˆ·äº¤äº’ï¼‰
            setTimeout(() => {
                if (currentScreen === 'start') {
                    playBackgroundMusic();
                }
            }, 1000);
            
            console.log('âœ… æ¸¸æˆåˆå§‹åŒ–å®Œæˆ');
        }
        
        function resizeCanvas() {
            const container = document.querySelector('.phone-container');
            canvasWidth = container.offsetWidth;
            canvasHeight = container.offsetHeight;
            
            // è®¾ç½®Canvaså°ºå¯¸
            canvas.width = canvasWidth;
            canvas.height = canvasHeight;
            starsCanvas.width = canvasWidth;
            starsCanvas.height = canvasHeight;
            
            // è®¾ç½®é«˜åˆ†è¾¨ç‡æ”¯æŒ
            const dpr = window.devicePixelRatio || 1;
            canvas.width = canvasWidth * dpr;
            canvas.height = canvasHeight * dpr;
            starsCanvas.width = canvasWidth * dpr;
            starsCanvas.height = canvasHeight * dpr;
            
            canvas.style.width = canvasWidth + 'px';
            canvas.style.height = canvasHeight + 'px';
            starsCanvas.style.width = canvasWidth + 'px';
            starsCanvas.style.height = canvasHeight + 'px';
            
            ctx.scale(dpr, dpr);
            starsCtx.scale(dpr, dpr);
        }

        // ============================================
        // è¯­éŸ³ç³»ç»Ÿ (å®Œå…¨å¤ç”¨ snackwordsgame çš„å®ç°)
        // ============================================
        
        function playWordReading(wordData) {
            console.log('ğŸ”Š æ’­æ”¾å•è¯æœ—è¯»:', wordData);
            
            // æ£€æŸ¥æ¸¸æˆçŠ¶æ€ï¼Œå¦‚æœæ¸¸æˆæš‚åœæˆ–ç»“æŸï¼Œä¸æ’­æ”¾è¯­éŸ³
            if (gamePaused || !gameRunning) {
                console.log('â¸ï¸ æ¸¸æˆæš‚åœæˆ–ç»“æŸï¼Œè·³è¿‡è¯­éŸ³æ’­æ”¾');
                return;
            }
            
            // æ£€æŸ¥è¯­éŸ³å¼€å…³
            if (!speechEnabled) {
                console.log('ğŸ”‡ è¯­éŸ³åŠŸèƒ½å·²å…³é—­');
                wordReadingInProgress = false;
                // è¯­éŸ³å…³é—­æ—¶ä¹Ÿè®¾ç½®è‡ªåŠ¨åˆ‡æ¢
                autoSwitchTimeout = setTimeout(() => {
                    if (gameRunning && !gamePaused) {
                        console.log('â° è¯­éŸ³åŠŸèƒ½å…³é—­ï¼Œè‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªå•è¯');
                        selectNewTargetWord();
                    }
                }, 3000);
                return;
            }
            
            // è®¾ç½®æœ—è¯»çŠ¶æ€
            wordReadingInProgress = true;
            
            // ä½¿ç”¨Web Speech APIè¿›è¡Œå•è¯æœ—è¯»
            if ('speechSynthesis' in window) {
                try {
                    // å–æ¶ˆä»»ä½•æ­£åœ¨è¿›è¡Œçš„æœ—è¯»
                    speechSynthesis.cancel();
                    
                    // å…ˆæœ—è¯»è‹±æ–‡å•è¯
                    const englishUtterance = new SpeechSynthesisUtterance(wordData.word);
                    englishUtterance.lang = 'en-US';
                    englishUtterance.rate = 1.0;
                    englishUtterance.pitch = 1.0;
                    englishUtterance.volume = 0.8;
                    
                    englishUtterance.onend = function() {
                        // å»¶è¿Ÿ300msåæœ—è¯»ä¸­æ–‡é‡Šä¹‰
                        setTimeout(() => {
                            if (!gamePaused && gameRunning && speechEnabled) {
                                try {
                                    const chineseUtterance = new SpeechSynthesisUtterance(wordData.chinese);
                                    chineseUtterance.lang = 'zh-CN';
                                    chineseUtterance.rate = 1.0;
                                    chineseUtterance.pitch = 1.0;
                                    chineseUtterance.volume = 0.8;
                                    
                                    chineseUtterance.onend = function() {
                                        // å»¶è¿Ÿ500msåæœ—è¯»è‹±æ–‡ä¾‹å¥
                                        setTimeout(() => {
                                            if (!gamePaused && gameRunning && speechEnabled && wordData.example) {
                                                try {
                                                    const englishExample = extractEnglish(wordData.example);
                                                    const chineseExample = extractChinese(wordData.example);
                                                    if (englishExample && chineseExample) {
                                                        // æ˜¾ç¤ºä¾‹å¥å¼¹çª—
                                                        showExampleDialog(englishExample, chineseExample);
                                                        
                                                        const exampleUtterance = new SpeechSynthesisUtterance(englishExample);
                                                        exampleUtterance.lang = 'en-US';
                                                        exampleUtterance.rate = 1.1;
                                                        exampleUtterance.pitch = 1.0;
                                                        exampleUtterance.volume = 0.7;
                                                        
                                                        exampleUtterance.onend = function() {
                                                            // å»¶è¿Ÿåæœ—è¯»ä¸­æ–‡ä¾‹å¥
                                                            const chineseExample = extractChinese(wordData.example);
                                                            if (chineseExample) {
                                                                setTimeout(() => {
                                                                    if (!gamePaused && gameRunning && speechEnabled) {
                                                                        try {
                                                                            const chineseExampleUtterance = new SpeechSynthesisUtterance(chineseExample);
                                                                            chineseExampleUtterance.lang = 'zh-CN';
                                                                            chineseExampleUtterance.rate = 1.0;
                                                                            chineseExampleUtterance.pitch = 1.0;
                                                                            chineseExampleUtterance.volume = 0.7;
                                                                            
                                                                            chineseExampleUtterance.onend = function() {
                                                                                console.log('âœ… å®Œæ•´å•è¯æœ—è¯»ç»“æŸ');
                                                                                wordReadingInProgress = false;
                                                                                
                                                                                // è®¾ç½®è‡ªåŠ¨åˆ‡æ¢è®¡æ—¶å™¨ï¼ˆ5ç§’åå¦‚æœç›®æ ‡æ•Œæœºä»æœªè¢«å‡»ä¸­ï¼Œè‡ªåŠ¨åˆ‡æ¢ï¼‰
                                                                                autoSwitchTimeout = setTimeout(() => {
                                                                                    if (gameRunning && !gamePaused) {
                                                                                        console.log('â° æœ—è¯»å®Œæˆåè‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªå•è¯');
                                                                                        selectNewTargetWord();
                                                                                    }
                                                                                }, 5000);
                                                                            };
                                                                            
                                                                            speechSynthesis.speak(chineseExampleUtterance);
                                                                        } catch (e) {
                                                                            console.error('âŒ ä¸­æ–‡ä¾‹å¥æœ—è¯»é”™è¯¯:', e);
                                                                        }
                                                                    }
                                                                }, englishExample.length * 50);
                                                            }
                                                        };
                                                        
                                                        speechSynthesis.speak(exampleUtterance);
                                                    }
                                                } catch (e) {
                                                    console.error('âŒ è‹±æ–‡ä¾‹å¥æœ—è¯»é”™è¯¯:', e);
                                                }
                                            } else {
                                                // æ²¡æœ‰ä¾‹å¥ï¼Œä¸­æ–‡æœ—è¯»å®Œæˆåè®¾ç½®è‡ªåŠ¨åˆ‡æ¢
                                                console.log('âœ… ä¸­æ–‡æœ—è¯»ç»“æŸï¼ˆæ— ä¾‹å¥ï¼‰');
                                                wordReadingInProgress = false;
                                                
                                                // è®¾ç½®è‡ªåŠ¨åˆ‡æ¢è®¡æ—¶å™¨
                                                autoSwitchTimeout = setTimeout(() => {
                                                    if (gameRunning && !gamePaused) {
                                                        console.log('â° æœ—è¯»å®Œæˆåè‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªå•è¯');
                                                        selectNewTargetWord();
                                                    }
                                                }, 5000);
                                            }
                                        }, 800);
                                    };
                                    
                                    speechSynthesis.speak(chineseUtterance);
                                } catch (e) {
                                    console.error('âŒ ä¸­æ–‡æœ—è¯»é”™è¯¯:', e);
                                }
                            }
                        }, 300);
                    };
                    
                    // å¼€å§‹æœ—è¯»
                    speechSynthesis.speak(englishUtterance);
                    
                } catch (error) {
                    console.error('âŒ playWordReading é”™è¯¯:', error);
                }
            } else {
                console.warn('âš ï¸ æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³åˆæˆ');
                // ä¸æ”¯æŒè¯­éŸ³åˆæˆæ—¶ï¼Œä»ç„¶è®¾ç½®è‡ªåŠ¨åˆ‡æ¢
                wordReadingInProgress = false;
                autoSwitchTimeout = setTimeout(() => {
                    if (gameRunning && !gamePaused) {
                        console.log('â° æ— è¯­éŸ³æ”¯æŒï¼Œè‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªå•è¯');
                        selectNewTargetWord();
                    }
                }, 3000); // è¾ƒçŸ­çš„ç­‰å¾…æ—¶é—´
            }
        }
        
        // æå–è‹±æ–‡éƒ¨åˆ†
        function extractEnglish(text) {
            if (!text) return '';
            const match = text.match(/^[^ã€‚ï¼ï¼Ÿ.!?]*[.!?]/);
            return match ? match[0].trim() : '';
        }
        
        // æå–ä¸­æ–‡éƒ¨åˆ†
        function extractChinese(text) {
            if (!text) return '';
            const match = text.match(/[ã€‚ï¼ï¼Ÿ.!?]\s*(.+)$/);
            return match ? match[1].trim() : '';
        }
        
        // åœæ­¢æ‰€æœ‰éŸ³é¢‘
        function stopAllAudio() {
            // åœæ­¢è¯­éŸ³åˆæˆ
            if ('speechSynthesis' in window) {
                speechSynthesis.cancel();
            }
            
            // åœæ­¢èƒŒæ™¯éŸ³ä¹
            stopBackgroundMusic();
        }
        

        // ============================================
        // æ¸¸æˆå¯¹è±¡ç±»å®šä¹‰
        // ============================================
        
        class Player {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.width = 40;
                this.height = 50;
                this.speed = 5;
                this.health = 3;
                this.weapon = 1; // æ­¦å™¨ç­‰çº§ 1-4
                this.lastShot = 0;
                this.shotCooldown = 200; // å°„å‡»å†·å´æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
            }
            
            update() {
                // é™åˆ¶ç©å®¶åœ¨å±å¹•è¾¹ç•Œå†…
                // ä¸ºåº•éƒ¨ç§»åŠ¨æ§åˆ¶åŒºåŸŸé¢„ç•™180pxç©ºé—´
                const bottomMargin = 180;
                this.x = Math.max(this.width / 2, Math.min(canvasWidth - this.width / 2, this.x));
                this.y = Math.max(this.height / 2, Math.min(canvasHeight - this.height / 2 - bottomMargin, this.y));
            }
            
            draw(ctx) {
                // ç»˜åˆ¶é£æœºä¸»ä½“
                ctx.fillStyle = '#4CAF50';
                ctx.beginPath();
                // é£æœºä¸‰è§’å½¢å½¢çŠ¶
                ctx.moveTo(this.x, this.y - this.height / 2);
                ctx.lineTo(this.x - this.width / 2, this.y + this.height / 2);
                ctx.lineTo(this.x + this.width / 2, this.y + this.height / 2);
                ctx.closePath();
                ctx.fill();
                
                // ç»˜åˆ¶é£æœºç»†èŠ‚
                ctx.fillStyle = '#2E7D32';
                ctx.fillRect(this.x - 3, this.y - 10, 6, 20);
                
                // æ ¹æ®æ­¦å™¨ç­‰çº§ç»˜åˆ¶ä¸åŒçš„æ­¦å™¨æ˜¾ç¤º
                ctx.fillStyle = this.getWeaponColor();
                ctx.beginPath();
                ctx.arc(this.x, this.y - this.height / 2 + 5, 3, 0, Math.PI * 2);
                ctx.fill();
            }
            
            getWeaponColor() {
                switch(this.weapon) {
                    case 1: return '#FFC107'; // åŸºç¡€æ­¦å™¨ - é»„è‰²
                    case 2: return '#FF9800'; // åŒå‘æ­¦å™¨ - æ©™è‰²
                    case 3: return '#F44336'; // ä¸‰å‘æ­¦å™¨ - çº¢è‰²
                    case 4: return '#9C27B0'; // æ¿€å…‰æ­¦å™¨ - ç´«è‰²
                    default: return '#FFC107';
                }
            }
            
            canShoot() {
                return Date.now() - this.lastShot > this.shotCooldown;
            }
            
            shoot() {
                if (!this.canShoot()) return [];
                
                this.lastShot = Date.now();
                const newBullets = [];
                
                switch(this.weapon) {
                    case 1: // åŸºç¡€æ­¦å™¨ - å•å‘
                        newBullets.push(new Bullet(this.x, this.y - this.height / 2, 0, -8, 'player'));
                        break;
                    case 2: // åŒå‘æ­¦å™¨
                        newBullets.push(new Bullet(this.x - 10, this.y - this.height / 2, 0, -8, 'player'));
                        newBullets.push(new Bullet(this.x + 10, this.y - this.height / 2, 0, -8, 'player'));
                        break;
                    case 3: // ä¸‰å‘æ­¦å™¨
                        newBullets.push(new Bullet(this.x - 15, this.y - this.height / 2, -1, -8, 'player'));
                        newBullets.push(new Bullet(this.x, this.y - this.height / 2, 0, -8, 'player'));
                        newBullets.push(new Bullet(this.x + 15, this.y - this.height / 2, 1, -8, 'player'));
                        break;
                }
                
                return newBullets;
            }
        }
        
        class Enemy {
            constructor(x, y, word, isTarget = false) {
                this.x = x;
                this.y = y;
                this.width = 35;
                this.height = 40;
                this.word = word;
                this.isTarget = isTarget;
                this.speed = this.getDifficultySpeed();
                this.health = 1; // æ‰€æœ‰æ•Œæœºä¸€å‡»æ¶ˆç­
                this.movementPattern = Math.floor(Math.random() * 4); // 0-3 ä¸åŒè¿åŠ¨æ¨¡å¼
                this.startTime = Date.now();
                this.amplitude = 30; // æ‘†åŠ¨å¹…åº¦
                this.frequency = 0.002; // æ‘†åŠ¨é¢‘ç‡
                this.startX = x;
            }
            
            update() {
                const elapsedTime = Date.now() - this.startTime;
                
                // åŸºç¡€å‘ä¸‹ç§»åŠ¨
                this.y += this.speed;
                
                // æ ¹æ®ç§»åŠ¨æ¨¡å¼æ·»åŠ æ¨ªå‘ç§»åŠ¨
                switch(this.movementPattern) {
                    case 0: // ç›´çº¿ä¸‹é™
                        break;
                    case 1: // Zå­—å½¢ç§»åŠ¨
                        this.x += Math.sin(elapsedTime * 0.005) * 2;
                        break;
                    case 2: // æ³¢æµªå½¢ç§»åŠ¨
                        this.x = this.startX + Math.sin(elapsedTime * this.frequency) * this.amplitude;
                        break;
                    case 3: // èºæ—‹å½¢ç§»åŠ¨
                        this.x = this.startX + Math.cos(elapsedTime * this.frequency * 2) * (this.amplitude * 0.7);
                        this.speed = 1.5; // èºæ—‹ç§»åŠ¨ç¨æ…¢ä¸€äº›
                        break;
                }
                
                // é™åˆ¶åœ¨å±å¹•è¾¹ç•Œå†…
                this.x = Math.max(this.width / 2, Math.min(canvasWidth - this.width / 2, this.x));
            }
            
            draw(ctx) {
                // ç»˜åˆ¶æ•Œæœº
                if (this.isTarget) {
                    // ç›®æ ‡æ•Œæœº - çº¢è‰²ï¼Œæ›´æ˜æ˜¾
                    ctx.fillStyle = '#F44336';
                    ctx.shadowColor = '#F44336';
                    ctx.shadowBlur = 8;
                } else {
                    // å¹²æ‰°æ•Œæœº - ç°è‰²
                    ctx.fillStyle = '#666666';
                    ctx.shadowColor = '#666666';
                    ctx.shadowBlur = 4;
                }
                
                ctx.beginPath();
                // æ•Œæœºå€’ä¸‰è§’å½¢çŠ¶
                ctx.moveTo(this.x, this.y + this.height / 2);
                ctx.lineTo(this.x - this.width / 2, this.y - this.height / 2);
                ctx.lineTo(this.x + this.width / 2, this.y - this.height / 2);
                ctx.closePath();
                ctx.fill();
                
                // æ¸…é™¤é˜´å½±
                ctx.shadowBlur = 0;
                
                // ç»˜åˆ¶å•è¯
                ctx.fillStyle = 'white';
                ctx.font = 'bold 12px Arial';
                ctx.textAlign = 'center';
                ctx.strokeStyle = 'black';
                ctx.lineWidth = 2;
                ctx.strokeText(this.word, this.x, this.y + 3);
                ctx.fillText(this.word, this.x, this.y + 3);
                
                // ç›®æ ‡æ•Œæœºç‰¹æ®Šæ ‡è®° - é‡‘è‰²å…‰ç¯
                if (this.isTarget) {
                    ctx.strokeStyle = '#FFC107';
                    ctx.lineWidth = 3;
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.width / 2 + 8, 0, Math.PI * 2);
                    ctx.stroke();
                    
                    // é—ªçƒæ•ˆæœ
                    const time = Date.now();
                    const alpha = 0.5 + 0.5 * Math.sin(time * 0.008);
                    ctx.globalAlpha = alpha;
                    ctx.strokeStyle = '#FFEB3B';
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.width / 2 + 12, 0, Math.PI * 2);
                    ctx.stroke();
                    ctx.globalAlpha = 1;
                }
            }
            
            getDifficultySpeed() {
                switch(selectedDifficulty) {
                    case 'easy': return 1.5;
                    case 'medium': return 2;
                    case 'hard': return 3;
                    default: return 2;
                }
            }
            
            isOffScreen() {
                return this.y > canvasHeight + this.height;
            }
        }
        
        class Bullet {
            constructor(x, y, vx, vy, type = 'player') {
                this.x = x;
                this.y = y;
                this.vx = vx;
                this.vy = vy;
                this.type = type;
                this.width = 4;
                this.height = 8;
                this.damage = 1;
            }
            
            update() {
                this.x += this.vx;
                this.y += this.vy;
            }
            
            draw(ctx) {
                ctx.fillStyle = this.type === 'player' ? '#4CAF50' : '#F44336';
                ctx.fillRect(this.x - this.width / 2, this.y - this.height / 2, this.width, this.height);
            }
            
            isOffScreen() {
                return this.y < -this.height || this.y > canvasHeight + this.height ||
                       this.x < -this.width || this.x > canvasWidth + this.width;
            }
        }
        
        
        class Particle {
            constructor(x, y, vx, vy, color, life) {
                this.x = x;
                this.y = y;
                this.vx = vx;
                this.vy = vy;
                this.color = color;
                this.life = life;
                this.maxLife = life;
                this.size = Math.random() * 3 + 1;
            }
            
            update() {
                this.x += this.vx;
                this.y += this.vy;
                this.life--;
                this.vy += 0.1; // é‡åŠ›æ•ˆæœ
            }
            
            draw(ctx) {
                const alpha = this.life / this.maxLife;
                ctx.globalAlpha = alpha;
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size * alpha, 0, Math.PI * 2);
                ctx.fill();
                ctx.globalAlpha = 1;
            }
            
            isDead() {
                return this.life <= 0;
            }
        }

        // ============================================
        // æ¸¸æˆé€»è¾‘å‡½æ•°
        // ============================================
        
        function initGame() {
            console.log('ğŸ® åˆå§‹åŒ–æ¸¸æˆé€»è¾‘...');
            
            // é‡ç½®æ¸¸æˆçŠ¶æ€
            score = 0;
            health = 10;
            maxHealth = 10;
            enemiesHitCount = 0;
            correctWordsCount = 0;
            wordsLearnedCount = 0;
            combo = 0;
            maxCombo = 0;
            weaponLevel = 1;
            learnedWords = [];
            wordReadingInProgress = false;
            
            // æ¸…é™¤è‡ªåŠ¨åˆ‡æ¢è®¡æ—¶å™¨
            if (autoSwitchTimeout) {
                clearTimeout(autoSwitchTimeout);
                autoSwitchTimeout = null;
            }
            
            // æ¸…ç©ºæ¸¸æˆå¯¹è±¡æ•°ç»„
            enemies = [];
            bullets = [];
            particles = [];
            
            // åˆ›å»ºç©å®¶ (ä½ç½®ä¸Šç§»40px)
            player = new Player(canvasWidth / 2, canvasHeight - 140);
            
            // é€‰æ‹©ç¬¬ä¸€ä¸ªç›®æ ‡å•è¯
            selectNewTargetWord();
            
            // æ›´æ–°UIæ˜¾ç¤º
            updateUI();
            
            // åˆå§‹åŒ–è¡€æ§½
            initHealthBar();
            updateHealthBar();
            
            // æ’­æ”¾èƒŒæ™¯éŸ³ä¹
            playBackgroundMusic();
        }
        
        function selectNewTargetWord() {
            const currentWords = words[selectedGrade];
            if (!currentWords || currentWords.length === 0) return;
            
            // æ¸…é™¤ä¹‹å‰çš„è‡ªåŠ¨åˆ‡æ¢è®¡æ—¶å™¨
            if (autoSwitchTimeout) {
                clearTimeout(autoSwitchTimeout);
                autoSwitchTimeout = null;
            }
            
            // éšæœºé€‰æ‹©ä¸€ä¸ªå•è¯ä½œä¸ºç›®æ ‡
            const randomIndex = Math.floor(Math.random() * currentWords.length);
            currentWordData = currentWords[randomIndex];
            targetWord = currentWordData.word;
            
            // æ›´æ–°UIæ˜¾ç¤º
            document.getElementById('targetWord').textContent = `ç›®æ ‡: ${targetWord}`;
            document.getElementById('targetChinese').textContent = currentWordData.chinese;
            
            console.log('ğŸ¯ æ–°ç›®æ ‡å•è¯:', targetWord, currentWordData.chinese);
            
            // ç«‹å³æ’­æ”¾å•è¯è¯­éŸ³æœ—è¯»
            if (speechEnabled && currentWordData) {
                // çŸ­æš‚å»¶è¿Ÿé¿å…ä¸æ¸¸æˆéŸ³æ•ˆå†²çª
                setTimeout(() => {
                    playWordReading(currentWordData);
                }, 200);
            }
        }
        
        function spawnEnemies() {
            if (enemies.length >= 6) return; // é™åˆ¶åŒå±æ•Œæœºæ•°é‡
            
            const currentWords = words[selectedGrade];
            if (!currentWords || currentWords.length === 0) return;
            
            // ç”Ÿæˆ3ä¸ªæ•Œæœº
            const positions = [
                canvasWidth * 0.2,
                canvasWidth * 0.5, 
                canvasWidth * 0.8
            ];
            
            // éšæœºé€‰æ‹©ä¸€ä¸ªä½ç½®æ”¾ç½®ç›®æ ‡æ•Œæœº
            const targetPosition = Math.floor(Math.random() * 3);
            
            for (let i = 0; i < 3; i++) {
                let enemyWord;
                let isTarget = false;
                
                if (i === targetPosition) {
                    // ç›®æ ‡æ•Œæœº
                    enemyWord = targetWord;
                    isTarget = true;
                } else {
                    // å¹²æ‰°æ•Œæœºï¼Œé€‰æ‹©ä¸åŒçš„å•è¯
                    do {
                        const randomIndex = Math.floor(Math.random() * currentWords.length);
                        enemyWord = currentWords[randomIndex].word;
                    } while (enemyWord === targetWord);
                }
                
                const enemy = new Enemy(positions[i], -50, enemyWord, isTarget);
                enemies.push(enemy);
            }
        }
        
        function updateGame(currentTime) {
            if (!gameRunning || gamePaused) return;
            
            deltaTime = currentTime - lastTime;
            lastTime = currentTime;
            
            // æ›´æ–°ç©å®¶
            if (player) {
                player.update();
            }
            
            // æ›´æ–°æ•Œæœº
            enemies.forEach(enemy => enemy.update());
            
            // ç§»é™¤ç¦»å¼€å±å¹•çš„æ•Œæœº
            enemies = enemies.filter(enemy => {
                if (enemy.isOffScreen()) {
                    if (enemy.isTarget) {
                        // ç›®æ ‡æ•Œæœºé€ƒè„±ï¼Œå‡å°‘è¡€æ§½
                        health--;
                        combo = 0; // é‡ç½®è¿å‡»
                        createExplosionParticles(enemy.x, canvasHeight, '#F44336');
                        updateHealthBar();
                        
                        if (health <= 0) {
                            gameOver();
                            return false;
                        } else {
                            selectNewTargetWord();
                        }
                    }
                    return false;
                }
                return true;
            });
            
            // æ›´æ–°å­å¼¹
            bullets.forEach(bullet => bullet.update());
            bullets = bullets.filter(bullet => !bullet.isOffScreen());
            
            // æ›´æ–°ç²’å­æ•ˆæœ
            particles.forEach(particle => particle.update());
            particles = particles.filter(particle => !particle.isDead());
            
            // ç¢°æ’æ£€æµ‹
            checkCollisions();
            
            // å®šæœŸç”Ÿæˆæ•Œæœº
            if (Math.random() < 0.02) { // 2% æ¦‚ç‡æ¯å¸§
                spawnEnemies();
            }
            
            // æ›´æ–°UI
            updateUI();
        }
        
        function checkCollisions() {
            // å­å¼¹ä¸æ•Œæœºç¢°æ’
            for (let i = bullets.length - 1; i >= 0; i--) {
                const bullet = bullets[i];
                if (bullet.type !== 'player') continue;
                
                for (let j = enemies.length - 1; j >= 0; j--) {
                    const enemy = enemies[j];
                    
                    if (isColliding(bullet, enemy)) {
                        // å‡»ä¸­æ•Œæœº - ä¸€å‡»æ¶ˆç­
                        enemiesHitCount++;
                        console.log(`ğŸ’¥ å‡»ä¸­æ•Œæœº: ${enemy.word}, ç›®æ ‡æ•Œæœº: ${enemy.isTarget}`);
                        
                        if (enemy.isTarget) {
                            // å‡»ä¸­ç›®æ ‡æ•Œæœº - æ­£ç¡®ç­”æ¡ˆ
                            correctWordsCount++;
                            combo++;
                            maxCombo = Math.max(maxCombo, combo);
                            
                            // æ¸…é™¤è‡ªåŠ¨åˆ‡æ¢è®¡æ—¶å™¨å’Œæœ—è¯»çŠ¶æ€ï¼ˆå› ä¸ºç©å®¶å·²æˆåŠŸå‡»ä¸­ï¼‰
                            if (autoSwitchTimeout) {
                                clearTimeout(autoSwitchTimeout);
                                autoSwitchTimeout = null;
                            }
                            wordReadingInProgress = false;
                            
                            // è®¡ç®—å¾—åˆ†ï¼ˆåŒ…å«è¿å‡»å¥–åŠ±ï¼‰
                            const baseScore = 50;
                            const comboBonus = Math.floor(combo * 0.1 * baseScore);
                            score += baseScore + comboBonus;
                            
                            // æ˜¾ç¤ºæˆåŠŸæç¤º
                            showNotification(`âœ… æ­£ç¡®ï¼+${baseScore + comboBonus}åˆ†`, '#4CAF50');
                            
                            // æ­¦å™¨å‡çº§æ£€æŸ¥
                            if (correctWordsCount > 0 && correctWordsCount % 5 === 0) {
                                upgradeWeapon();
                            }
                            
                            // è¡€æ§½æ¢å¤æ£€æŸ¥ (æ¯å‡»ä¸­5ä¸ªç›®æ ‡å•è¯åŠ 1æ ¼è¡€)
                            if (correctWordsCount > 0 && correctWordsCount % 5 === 0 && health < maxHealth) {
                                health++;
                                updateHealthBar();
                                showNotification('â¤ï¸ è¡€æ§½æ¢å¤ï¼', '#4CAF50');
                            }
                            
                            // è®°å½•å·²å­¦ä¹ å•è¯
                            if (!learnedWords.find(w => w.word === currentWordData.word)) {
                                learnedWords.push(currentWordData);
                                wordsLearnedCount++;
                            }
                            
                            // é€‰æ‹©æ–°ç›®æ ‡å•è¯
                            selectNewTargetWord();
                            
                            // åˆ›å»ºæˆåŠŸç²’å­æ•ˆæœ
                            createExplosionParticles(enemy.x, enemy.y, '#4CAF50');
                            
                        } else {
                            // å‡»ä¸­å¹²æ‰°æ•Œæœº - é”™è¯¯ç­”æ¡ˆ
                            score += 10;
                            combo = Math.max(0, combo - 1); // å‡å°‘è¿å‡»æ•°ä½†ä¸ä½äº0
                            showNotification('âŒ é”™è¯¯å•è¯ï¼+10åˆ†', '#FF9800');
                            createExplosionParticles(enemy.x, enemy.y, '#FF9800');
                        }
                        
                        // ç§»é™¤å­å¼¹å’Œæ•Œæœº - ä¸€å‡»å¿…æ€
                        bullets.splice(i, 1);
                        enemies.splice(j, 1);
                        break;
                    }
                }
            }
            
            // æ•Œæœºä¸ç©å®¶ç¢°æ’
            for (let i = enemies.length - 1; i >= 0; i--) {
                const enemy = enemies[i];
                if (isColliding(player, enemy)) {
                    health--;
                    combo = 0;
                    createExplosionParticles(player.x, player.y, '#F44336');
                    enemies.splice(i, 1);
                    updateHealthBar();
                    
                    if (health <= 0) {
                        gameOver();
                        return;
                    }
                }
            }
        }
        
        function isColliding(obj1, obj2) {
            return obj1.x < obj2.x + obj2.width / 2 &&
                   obj1.x + obj1.width / 2 > obj2.x &&
                   obj1.y < obj2.y + obj2.height / 2 &&
                   obj1.y + obj1.height / 2 > obj2.y;
        }
        
        function upgradeWeapon() {
            if (weaponLevel < 3) {
                weaponLevel++;
                player.weapon = weaponLevel;
                
                // æ˜¾ç¤ºå‡çº§æç¤º
                showNotification(`æ­¦å™¨å‡çº§ï¼ç­‰çº§ ${weaponLevel}`);
                
                console.log('â¬†ï¸ æ­¦å™¨å‡çº§åˆ°ç­‰çº§:', weaponLevel);
            }
        }
        
        function createExplosionParticles(x, y, color) {
            for (let i = 0; i < 8; i++) {
                const angle = (Math.PI * 2 * i) / 8;
                const speed = Math.random() * 3 + 2;
                const vx = Math.cos(angle) * speed;
                const vy = Math.sin(angle) * speed;
                const life = Math.floor(Math.random() * 20) + 20;
                
                particles.push(new Particle(x, y, vx, vy, color, life));
            }
        }
        
        function showNotification(text, color = '#FFFFFF') {
            console.log('ğŸ“¢ é€šçŸ¥:', text);
            
            // åˆ›å»ºæµ®åŠ¨é€šçŸ¥
            const notification = document.createElement('div');
            notification.textContent = text;
            notification.style.cssText = `
                position: fixed;
                top: 25%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(0, 0, 0, 0.8);
                color: ${color};
                padding: 10px 20px;
                border-radius: 20px;
                font-size: 14px;
                font-weight: bold;
                z-index: 1000;
                pointer-events: none;
                animation: fadeInOut 2s ease-in-out forwards;
            `;
            
            // æ·»åŠ åŠ¨ç”»æ ·å¼
            if (!document.getElementById('notification-styles')) {
                const style = document.createElement('style');
                style.id = 'notification-styles';
                style.textContent = `
                    @keyframes fadeInOut {
                        0% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
                        20% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
                        80% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
                        100% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
                    }
                `;
                document.head.appendChild(style);
            }
            
            document.body.appendChild(notification);
            
            // 2ç§’åç§»é™¤é€šçŸ¥
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 2000);
        }
        
        function updateUI() {
            document.getElementById('scoreDisplay').textContent = score;
            document.getElementById('livesDisplay').textContent = `${health}/${maxHealth}`;
            
            const weaponNames = ['', 'åŸºç¡€', 'åŒå‘', 'ä¸‰å‘'];
            document.getElementById('weaponDisplay').textContent = weaponNames[weaponLevel] || 'åŸºç¡€';
        }
        
        function initHealthBar() {
            const healthBar = document.getElementById('healthBar');
            healthBar.innerHTML = '';
            
            for (let i = 0; i < maxHealth; i++) {
                const segment = document.createElement('div');
                segment.className = 'health-segment';
                segment.id = `health-${i}`;
                healthBar.appendChild(segment);
            }
        }
        
        function updateHealthBar() {
            for (let i = 0; i < maxHealth; i++) {
                const segment = document.getElementById(`health-${i}`);
                if (segment) {
                    if (i < health) {
                        segment.classList.remove('damaged');
                    } else {
                        segment.classList.add('damaged');
                    }
                }
            }
        }
        
        function drawGame() {
            if (!ctx || !gameRunning) return;
            
            // æ¸…é™¤ç”»å¸ƒ
            ctx.clearRect(0, 0, canvasWidth, canvasHeight);
            
            // ç»˜åˆ¶æ¸¸æˆå¯¹è±¡
            if (player) {
                player.draw(ctx);
            }
            
            enemies.forEach(enemy => enemy.draw(ctx));
            bullets.forEach(bullet => bullet.draw(ctx));
            particles.forEach(particle => particle.draw(ctx));
            
            // ç»˜åˆ¶è¿å‡»æ˜¾ç¤º
            if (combo > 1) {
                ctx.fillStyle = '#FFC107';
                ctx.font = 'bold 16px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(`${combo} è¿å‡»!`, canvasWidth / 2, 50);
            }
        }
        
        function gameLoop(currentTime) {
            updateGame(currentTime);
            drawGame();
            
            if (gameRunning) {
                gameLoopId = requestAnimationFrame(gameLoop);
            }
        }
        
        function startGame() {
            console.log('ğŸš€ å¼€å§‹æ¸¸æˆ');
            
            currentScreen = 'game';
            gameRunning = true;
            gamePaused = false;
            
            // åˆ‡æ¢åˆ°æ¸¸æˆç•Œé¢
            switchScreen('gameScreen');
            
            // åˆå§‹åŒ–æ¸¸æˆ
            initGame();
            
            // å¯åŠ¨æ¸¸æˆå¾ªç¯
            lastTime = performance.now();
            gameLoopId = requestAnimationFrame(gameLoop);
        }
        
        function pauseGame() {
            gamePaused = !gamePaused;
            console.log(gamePaused ? 'â¸ï¸ æ¸¸æˆæš‚åœ' : 'â–¶ï¸ æ¸¸æˆç»§ç»­');
            
            if (gamePaused) {
                // æš‚åœèƒŒæ™¯éŸ³ä¹
                if (backgroundMusic && !backgroundMusic.paused) {
                    backgroundMusic.pause();
                    console.log('ğŸµ èƒŒæ™¯éŸ³ä¹æš‚åœ');
                }
            } else if (gameRunning) {
                // æ¢å¤æ¸¸æˆå¾ªç¯
                lastTime = performance.now();
                gameLoopId = requestAnimationFrame(gameLoop);
                
                // æ¢å¤èƒŒæ™¯éŸ³ä¹
                if (backgroundMusic && backgroundMusic.paused) {
                    backgroundMusic.play().catch(e => console.log('èƒŒæ™¯éŸ³ä¹æ’­æ”¾å¤±è´¥:', e));
                    console.log('ğŸµ èƒŒæ™¯éŸ³ä¹æ¢å¤');
                }
            }
        }
        
        function gameOver() {
            console.log('ğŸ’€ æ¸¸æˆç»“æŸ');
            
            gameRunning = false;
            gamePaused = false;
            
            if (gameLoopId) {
                cancelAnimationFrame(gameLoopId);
                gameLoopId = null;
            }
            
            // åœæ­¢æ‰€æœ‰éŸ³é¢‘
            stopAllAudio();
            
            // æ›´æ–°ç»“æŸç•Œé¢æ•°æ®
            document.getElementById('finalScore').textContent = score;
            document.getElementById('enemiesHit').textContent = enemiesHitCount;
            document.getElementById('correctWords').textContent = correctWordsCount;
            document.getElementById('wordsLearned').textContent = correctWordsCount; // ç®€åŒ–ä¸ºå‡»ä¸­çš„æ­£ç¡®å•è¯æ•°
            document.getElementById('maxCombo').textContent = maxCombo;
            
            // åˆ‡æ¢åˆ°æ¸¸æˆç»“æŸç•Œé¢
            switchScreen('gameOverScreen');
            currentScreen = 'gameOver';
        }
        
        function backToMenu() {
            console.log('ğŸ  è¿”å›ä¸»èœå•');
            
            gameRunning = false;
            gamePaused = false;
            
            if (gameLoopId) {
                cancelAnimationFrame(gameLoopId);
                gameLoopId = null;
            }
            
            // åœæ­¢æ‰€æœ‰éŸ³é¢‘
            stopAllAudio();
            
            // åˆ‡æ¢åˆ°å¼€å§‹ç•Œé¢
            switchScreen('startScreen');
            currentScreen = 'start';
        }
        
        function showVocabulary() {
            console.log('ğŸ“š æ˜¾ç¤ºè¯æ±‡æœ¬');
            const currentWords = words[selectedGrade] || words[1];
            let vocabularyText = `ğŸ“š ${selectedGrade}å¹´çº§å•è¯æœ¬:\n\n`;
            
            currentWords.forEach((wordObj, index) => {
                vocabularyText += `${index + 1}. ${wordObj.word} - ${wordObj.chinese}\n`;
            });
            
            alert(vocabularyText);
        }
        
        function showLearnedWords() {
            console.log('ğŸ“– æ˜¾ç¤ºå·²å­¦å•è¯');
            if (learnedWords.length === 0) {
                alert('ğŸ“ è¿˜æ²¡æœ‰å­¦ä¹ ä»»ä½•å•è¯ï¼Œå¿«å»æ¸¸æˆä¸­å­¦ä¹ å§ï¼');
                return;
            }
            
            let learnedText = `ğŸ“– å·²å­¦ä¹ çš„å•è¯ (${learnedWords.length}ä¸ª):\n\n`;
            learnedWords.forEach((wordObj, index) => {
                learnedText += `${index + 1}. ${wordObj.word} - ${wordObj.chinese}\n`;
            });
            
            alert(learnedText);
        }
        
        function showExampleDialog(englishExample, chineseExample) {
            // åˆ›å»ºç®€æ´é€æ˜çš„ä¾‹å¥å¼¹çª—
            const dialog = document.createElement('div');
            dialog.className = 'example-dialog';
            dialog.style.cssText = 'position:fixed;top:30%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,0.4);color:white;padding:12px 16px;border-radius:8px;z-index:10001;max-width:300px;font-size:14px;line-height:1.4;text-align:center;pointer-events:none';
            
            dialog.innerHTML = `
                <div style="font-size: 16px; margin-bottom: 6px;">${englishExample}</div>
                <div style="font-size: 14px; color: #FFD700;">${chineseExample}</div>
            `;
            
            document.body.appendChild(dialog);
            
            // 3ç§’åè‡ªåŠ¨å…³é—­
            setTimeout(() => {
                if (dialog && dialog.parentElement) {
                    dialog.remove();
                }
            }, 3000);
            
            console.log('ğŸ“š æ˜¾ç¤ºä¾‹å¥å¼¹çª—:', englishExample, '/', chineseExample);
        }

        // ============================================
        // æ˜Ÿç©ºèƒŒæ™¯ç³»ç»Ÿ
        // ============================================
        
        let stars = [];
        
        function initStars() {
            stars = [];
            for (let i = 0; i < 100; i++) {
                stars.push({
                    x: Math.random() * canvasWidth,
                    y: Math.random() * canvasHeight,
                    size: Math.random() * 2 + 0.5,
                    speed: Math.random() * 2 + 0.5,
                    alpha: Math.random() * 0.8 + 0.2
                });
            }
            
            animateStars();
        }
        
        function animateStars() {
            if (!starsCtx) return;
            
            starsCtx.clearRect(0, 0, canvasWidth, canvasHeight);
            
            stars.forEach(star => {
                star.y += star.speed;
                
                // é‡ç½®è¶…å‡ºå±å¹•çš„æ˜Ÿæ˜Ÿ
                if (star.y > canvasHeight) {
                    star.y = -10;
                    star.x = Math.random() * canvasWidth;
                }
                
                // ç»˜åˆ¶æ˜Ÿæ˜Ÿ
                starsCtx.globalAlpha = star.alpha;
                starsCtx.fillStyle = 'white';
                starsCtx.beginPath();
                starsCtx.arc(star.x, star.y, star.size, 0, Math.PI * 2);
                starsCtx.fill();
            });
            
            starsCtx.globalAlpha = 1;
            requestAnimationFrame(animateStars);
        }
        
        // ============================================
        // éŸ³é¢‘ç³»ç»Ÿ (å¤ç”¨snackwordsgameçš„èƒŒæ™¯éŸ³ä¹å®ç°)
        // ============================================
        
        let audioContext;
        let backgroundMusicGain;
        let backgroundMusicSource;
        let backgroundMusic;
        
        function initAudio() {
            try {
                // åˆ›å»ºHTML5 Audioå…ƒç´ æ’­æ”¾èƒŒæ™¯éŸ³ä¹
                backgroundMusic = new Audio('background.mp3');
                backgroundMusic.loop = true;
                backgroundMusic.volume = 0.3;
                
                backgroundMusic.addEventListener('canplay', () => {
                    console.log('ğŸ”Š èƒŒæ™¯éŸ³ä¹æ–‡ä»¶åŠ è½½æˆåŠŸ');
                });
                
                backgroundMusic.addEventListener('error', (e) => {
                    console.warn('âš ï¸ èƒŒæ™¯éŸ³ä¹åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨åˆæˆéŸ³é¢‘:', e);
                    // å¦‚æœMP3æ–‡ä»¶åŠ è½½å¤±è´¥ï¼Œå›é€€åˆ°Web Audio API
                    initSynthAudio();
                });
                
                console.log('ğŸ”Š éŸ³é¢‘ç³»ç»Ÿåˆå§‹åŒ–æˆåŠŸ');
            } catch (error) {
                console.warn('âš ï¸ éŸ³é¢‘ç³»ç»Ÿåˆå§‹åŒ–å¤±è´¥:', error);
            }
        }
        
        function initSynthAudio() {
            try {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                backgroundMusicGain = audioContext.createGain();
                backgroundMusicGain.connect(audioContext.destination);
                backgroundMusicGain.gain.value = 0.3;
                console.log('ğŸ”Š åˆæˆéŸ³é¢‘ç³»ç»Ÿåˆå§‹åŒ–æˆåŠŸ');
            } catch (error) {
                console.warn('âš ï¸ åˆæˆéŸ³é¢‘ç³»ç»Ÿåˆå§‹åŒ–å¤±è´¥:', error);
            }
        }
        
        function createBackgroundMusic() {
            if (!audioContext) return;
            
            try {
                // åˆ›å»ºç®€å•çš„èƒŒæ™¯éŸ³ä¹ï¼ˆ8bité£æ ¼ï¼‰
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.type = 'square';
                oscillator.frequency.setValueAtTime(262, audioContext.currentTime); // C4
                
                gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                
                oscillator.connect(gainNode);
                gainNode.connect(backgroundMusicGain);
                
                oscillator.start();
                backgroundMusicSource = oscillator;
                
                // ç®€å•çš„æ—‹å¾‹å˜åŒ–
                setTimeout(() => {
                    if (backgroundMusicSource && audioEnabled) {
                        oscillator.frequency.setValueAtTime(330, audioContext.currentTime); // E4
                    }
                }, 1000);
                
            } catch (error) {
                console.warn('âš ï¸ èƒŒæ™¯éŸ³ä¹åˆ›å»ºå¤±è´¥:', error);
            }
        }
        
        function playBackgroundMusic() {
            if (!audioEnabled) return;
            
            if (backgroundMusic) {
                try {
                    backgroundMusic.currentTime = 0;
                    backgroundMusic.play();
                    console.log('ğŸµ å¼€å§‹æ’­æ”¾èƒŒæ™¯éŸ³ä¹');
                } catch (error) {
                    console.warn('âš ï¸ æ’­æ”¾èƒŒæ™¯éŸ³ä¹å¤±è´¥:', error);
                    // å›é€€åˆ°åˆæˆéŸ³é¢‘
                    createBackgroundMusic();
                }
            } else if (audioContext) {
                // ä½¿ç”¨åˆæˆéŸ³é¢‘ä½œä¸ºå¤‡é€‰
                createBackgroundMusic();
            }
        }
        
        function stopBackgroundMusic() {
            if (backgroundMusic) {
                try {
                    backgroundMusic.pause();
                    backgroundMusic.currentTime = 0;
                } catch (error) {
                    console.warn('âš ï¸ åœæ­¢èƒŒæ™¯éŸ³ä¹å¤±è´¥:', error);
                }
            }
            
            if (backgroundMusicSource) {
                try {
                    backgroundMusicSource.stop();
                    backgroundMusicSource = null;
                } catch (error) {
                    console.warn('âš ï¸ åœæ­¢åˆæˆéŸ³ä¹å¤±è´¥:', error);
                }
            }
        }
        
        function toggleAudio() {
            audioEnabled = !audioEnabled;
            if (audioEnabled) {
                playBackgroundMusic();
            } else {
                stopBackgroundMusic();
            }
        }
        
        // ============================================
        // ç•Œé¢åˆ‡æ¢ç³»ç»Ÿ
        // ============================================
        
        function switchScreen(targetScreenId) {
            // éšè—æ‰€æœ‰ç•Œé¢
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            
            // æ˜¾ç¤ºç›®æ ‡ç•Œé¢
            const targetScreen = document.getElementById(targetScreenId);
            if (targetScreen) {
                targetScreen.classList.add('active');
                console.log('ğŸ”„ åˆ‡æ¢åˆ°ç•Œé¢:', targetScreenId);
            }
        }

        // ============================================
        // äº‹ä»¶ç›‘å¬å™¨
        // ============================================
        
        function bindEventListeners() {
            // å¼€å§‹æ¸¸æˆæŒ‰é’®
            document.getElementById('startGameBtn').addEventListener('click', function() {
                selectedGrade = parseInt(document.getElementById('gradeSelect').value);
                selectedDifficulty = document.getElementById('difficultySelect').value;
                console.log('ğŸ“š é€‰æ‹©å¹´çº§:', selectedGrade, 'éš¾åº¦:', selectedDifficulty);
                
                // æ¢å¤éŸ³é¢‘ä¸Šä¸‹æ–‡ï¼ˆç”¨æˆ·äº¤äº’åæ¿€æ´»ï¼‰
                if (audioContext && audioContext.state === 'suspended') {
                    audioContext.resume().then(() => {
                        console.log('ğŸ”Š éŸ³é¢‘ä¸Šä¸‹æ–‡å·²æ¢å¤');
                    });
                }
                
                // åˆå§‹åŒ–è¯­éŸ³åˆæˆ
                if ('speechSynthesis' in window) {
                    const testUtterance = new SpeechSynthesisUtterance('Game Start');
                    testUtterance.lang = 'en-US';
                    testUtterance.volume = 0.01;
                    testUtterance.onend = () => {
                        console.log('ğŸ”Š è¯­éŸ³åˆæˆåˆå§‹åŒ–å®Œæˆ');
                    };
                    speechSynthesis.speak(testUtterance);
                }
                
                startGame();
            });
            
            // æ¸¸æˆè¯´æ˜æŒ‰é’®
            document.getElementById('instructionsBtn').addEventListener('click', function() {
                const instructions = 'ğŸ® æ¸¸æˆè¯´æ˜:\n\n1. ä½¿ç”¨æ–¹å‘é”®æˆ–è§¦æ‘¸æ§åˆ¶é£æœºç§»åŠ¨\n2. æŒ‰ç©ºæ ¼é”®æˆ–å°„å‡»æŒ‰é’®å‘å°„å­å¼¹\n3. å°„å‡»æ ‡æœ‰ç›®æ ‡å•è¯çš„çº¢è‰²æ•Œæœº\n4. é¿å…å°„å‡»ç°è‰²å¹²æ‰°æ•Œæœº\n5. è¿ç»­å‡»ä¸­ç›®æ ‡å¯è·å¾—è¿å‡»å¥–åŠ±\n6. æ¯å‡»ä¸­5ä¸ªç›®æ ‡å•è¯å³å¯å‡çº§æ­¦å™¨\n7. ç”Ÿå‘½å€¼ä¸º0æ—¶æ¸¸æˆç»“æŸ';
                
                // åˆ›å»ºè‡ªå®šä¹‰å¼¹çª—ï¼Œå­—ä½“ç¨å¾®å°ä¸€ç‚¹
                const dialog = document.createElement('div');
                dialog.style.cssText = 'position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:white;padding:20px;border-radius:10px;box-shadow:0 4px 20px rgba(0,0,0,0.3);z-index:10000;max-width:450px;font-size:14px;line-height:1.4;color:black;display:block;visibility:visible;opacity:1';
                dialog.innerHTML = instructions.replace(/\n/g, '<br>') + '<br><br><button onclick="this.parentElement.remove()" style="background:#007AFF;color:white;border:none;padding:8px 16px;border-radius:5px;cursor:pointer">ç¡®å®š</button>';
                document.body.appendChild(dialog);
            });
            
            // è¯æ±‡æœ¬æŒ‰é’®
            document.getElementById('vocabularyBtn').addEventListener('click', showVocabulary);
            
            // å·²å­¦å•è¯æŒ‰é’®  
            document.getElementById('viewWordsBtn').addEventListener('click', showLearnedWords);
            
            // æ¸¸æˆå†…è¿”å›æŒ‰é’®
            document.getElementById('backBtn').addEventListener('click', backToMenu);
            
            // ç§»åŠ¨ç«¯æš‚åœæŒ‰é’®
            document.getElementById('mobilePauseBtn').addEventListener('click', pauseGame);
            
            // å†ç©ä¸€æ¬¡æŒ‰é’®
            document.getElementById('playAgainBtn').addEventListener('click', startGame);
            
            // è¿”å›ä¸»èœå•æŒ‰é’®
            document.getElementById('backToMenuBtn').addEventListener('click', backToMenu);
            
            // é”®ç›˜æ§åˆ¶
            document.addEventListener('keydown', function(event) {
                keys[event.key] = true;
                
                if (currentScreen === 'game' && gameRunning && !gamePaused) {
                    handleKeyboard(event);
                }
                
                // é˜»æ­¢ç©ºæ ¼é”®æ»šåŠ¨é¡µé¢
                if (event.key === ' ') {
                    event.preventDefault();
                }
            });
            
            document.addEventListener('keyup', function(event) {
                keys[event.key] = false;
            });
            
            // è§¦æ‘¸æ§åˆ¶ï¼ˆç§»åŠ¨ç«¯ï¼‰
            bindTouchControls();
            
            // çª—å£å¤§å°æ”¹å˜äº‹ä»¶
            window.addEventListener('resize', resizeCanvas);
        }
        
        function handleKeyboard(event) {
            if (!player) return;
            
            switch(event.key) {
                case 'ArrowLeft':
                case 'a':
                case 'A':
                    player.x -= player.speed;
                    player.update();
                    break;
                case 'ArrowRight':
                case 'd':
                case 'D':
                    player.x += player.speed;
                    player.update();
                    break;
                case 'ArrowUp':
                case 'w':
                case 'W':
                    player.y -= player.speed;
                    player.update();
                    break;
                case 'ArrowDown':
                case 's':
                case 'S':
                    player.y += player.speed;
                    player.update();
                    break;
                case ' ':
                case 'Enter':
                    // å°„å‡»
                    const newBullets = player.shoot();
                    bullets.push(...newBullets);
                    event.preventDefault();
                    break;
                case 'p':
                case 'P':
                    pauseGame();
                    break;
            }
        }
        
        function bindTouchControls() {
            // è™šæ‹Ÿæ‘‡æ†æ§åˆ¶
            const joystickArea = document.getElementById('joystickArea');
            const joystickKnob = document.getElementById('joystickKnob');
            const shootBtn = document.getElementById('shootBtn');
            
            // è§¦æ‘¸çŠ¶æ€è¿½è¸ª - ä½¿ç”¨ Map æ¥ç®¡ç†å¤šä¸ªè§¦æ‘¸ç‚¹
            const activeTouches = new Map(); // touchId -> { element, type, data }
            let shootInterval = null;
            
            // è¾…åŠ©å‡½æ•°ï¼šæŸ¥æ‰¾ç‰¹å®šç±»å‹çš„è§¦æ‘¸
            function findTouchByType(type) {
                for (let [touchId, touchData] of activeTouches) {
                    if (touchData.type === type) return { touchId, ...touchData };
                }
                return null;
            }
            
            // è¾…åŠ©å‡½æ•°ï¼šç§»é™¤ç‰¹å®šè§¦æ‘¸
            function removeTouchById(touchId) {
                const touchData = activeTouches.get(touchId);
                if (touchData) {
                    if (touchData.type === 'joystick') {
                        joystickActive = false;
                        joystickPosition = { x: 0, y: 0 };
                        joystickKnob.style.transform = 'translate(0px, 0px)';
                    } else if (touchData.type === 'shoot') {
                        if (shootInterval) {
                            clearInterval(shootInterval);
                            shootInterval = null;
                        }
                    }
                    activeTouches.delete(touchId);
                }
            }
            
            // æ‘‡æ†åŒºåŸŸè§¦æ‘¸å¤„ç†
            joystickArea.addEventListener('touchstart', function(e) {
                e.stopPropagation(); // é˜»æ­¢äº‹ä»¶å†’æ³¡ï¼Œä½†ä¸é˜»æ­¢é»˜è®¤è¡Œä¸º
                
                // åªå¤„ç†å½“å‰å…ƒç´ å†…çš„è§¦æ‘¸
                for (let i = 0; i < e.changedTouches.length; i++) {
                    const touch = e.changedTouches[i];
                    
                    // å¦‚æœå·²ç»æœ‰æ‘‡æ†è§¦æ‘¸ï¼Œå¿½ç•¥
                    if (findTouchByType('joystick')) continue;
                    
                    const rect = joystickArea.getBoundingClientRect();
                    const joystickStartPos = {
                        x: rect.left + rect.width / 2,
                        y: rect.top + rect.height / 2
                    };
                    
                    activeTouches.set(touch.identifier, {
                        type: 'joystick',
                        element: joystickArea,
                        startPos: joystickStartPos
                    });
                    
                    joystickActive = true;
                    console.log(`ğŸ•¹ï¸ æ‘‡æ†è§¦æ‘¸å¼€å§‹: ID ${touch.identifier}`);
                    break; // åªå¤„ç†ç¬¬ä¸€ä¸ªè§¦æ‘¸ç‚¹
                }
            });
            
            // å°„å‡»æŒ‰é’®è§¦æ‘¸å¤„ç†
            shootBtn.addEventListener('touchstart', function(e) {
                e.stopPropagation();
                
                for (let i = 0; i < e.changedTouches.length; i++) {
                    const touch = e.changedTouches[i];
                    
                    // å¦‚æœå·²ç»æœ‰å°„å‡»è§¦æ‘¸ï¼Œå¿½ç•¥
                    if (findTouchByType('shoot')) continue;
                    
                    activeTouches.set(touch.identifier, {
                        type: 'shoot',
                        element: shootBtn
                    });
                    
                    // ç«‹å³å°„å‡»
                    if (player && currentScreen === 'game' && gameRunning && !gamePaused) {
                        const newBullets = player.shoot();
                        bullets.push(...newBullets);
                    }
                    
                    // å¼€å§‹è¿å‘
                    if (shootInterval) clearInterval(shootInterval);
                    shootInterval = setInterval(() => {
                        if (player && currentScreen === 'game' && gameRunning && !gamePaused && findTouchByType('shoot')) {
                            const newBullets = player.shoot();
                            bullets.push(...newBullets);
                        }
                    }, 150);
                    
                    console.log(`ğŸ”¥ å°„å‡»è§¦æ‘¸å¼€å§‹: ID ${touch.identifier}`);
                    break;
                }
            });
            
            // å…¨å±€è§¦æ‘¸ç§»åŠ¨å¤„ç†
            document.addEventListener('touchmove', function(e) {
                e.preventDefault();
                
                for (let i = 0; i < e.touches.length; i++) {
                    const touch = e.touches[i];
                    const touchData = activeTouches.get(touch.identifier);
                    
                    if (!touchData) continue;
                    
                    // æ‘‡æ†ç§»åŠ¨å¤„ç†
                    if (touchData.type === 'joystick' && player) {
                        const deltaX = touch.clientX - touchData.startPos.x;
                        const deltaY = touch.clientY - touchData.startPos.y;
                        const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);
                        const maxDistance = 40;
                        
                        if (distance > 0) {
                            const normalizedX = deltaX / distance;
                            const normalizedY = deltaY / distance;
                            const clampedDistance = Math.min(distance, maxDistance);
                            
                            // æ›´æ–°æ‘‡æ†æ—‹é’®ä½ç½®
                            joystickPosition.x = normalizedX * clampedDistance;
                            joystickPosition.y = normalizedY * clampedDistance;
                            
                            joystickKnob.style.transform = `translate(${joystickPosition.x}px, ${joystickPosition.y}px)`;
                            
                            // ç§»åŠ¨ç©å®¶
                            player.x += normalizedX * player.speed;
                            player.y += normalizedY * player.speed;
                            
                            // åº”ç”¨è¾¹ç•Œæ£€æµ‹
                            player.update();
                        }
                    }
                }
            }, { passive: false });
            
            // å…¨å±€è§¦æ‘¸ç»“æŸå¤„ç†
            document.addEventListener('touchend', function(e) {
                e.preventDefault();
                
                for (let i = 0; i < e.changedTouches.length; i++) {
                    const touch = e.changedTouches[i];
                    const touchData = activeTouches.get(touch.identifier);
                    
                    if (touchData) {
                        console.log(`ğŸ”š è§¦æ‘¸ç»“æŸ: ID ${touch.identifier}, ç±»å‹: ${touchData.type}`);
                        removeTouchById(touch.identifier);
                    }
                }
            });
            
            // è§¦æ‘¸å–æ¶ˆå¤„ç†
            document.addEventListener('touchcancel', function(e) {
                console.log('âŒ è§¦æ‘¸å–æ¶ˆï¼Œæ¸…é™¤æ‰€æœ‰è§¦æ‘¸çŠ¶æ€');
                
                // æ¸…é™¤æ‰€æœ‰è§¦æ‘¸çŠ¶æ€
                activeTouches.clear();
                joystickActive = false;
                joystickPosition = { x: 0, y: 0 };
                joystickKnob.style.transform = 'translate(0px, 0px)';
                if (shootInterval) {
                    clearInterval(shootInterval);
                    shootInterval = null;
                }
            });
            
            // è°ƒè¯•ä¿¡æ¯
            setInterval(() => {
                if (activeTouches.size > 0) {
                    const touchInfo = Array.from(activeTouches.entries()).map(([id, data]) => `${id}:${data.type}`).join(', ');
                    console.log(`ğŸ” æ´»è·ƒè§¦æ‘¸: [${touchInfo}]`);
                }
            }, 2000);
        }

        // ============================================
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        // ============================================
        
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ“„ DOM åŠ è½½å®Œæˆ');
            init();
        });
    </script>
</body>
</html>